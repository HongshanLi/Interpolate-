{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/annotations/annotations-component-tips-bottom-sheet.html","webpack:///./src/app/annotations/annotations.component.css","webpack:///./src/app/annotations/annotations.component.html","webpack:///./src/app/annotations/annotations.component.ts","webpack:///./src/app/annotations/annotations.service.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/auth/auth-guard.ts","webpack:///./src/app/auth/auth-interceptor.ts","webpack:///./src/app/auth/auth.service.ts","webpack:///./src/app/auth/login/login.component.css","webpack:///./src/app/auth/login/login.component.html","webpack:///./src/app/auth/login/login.component.ts","webpack:///./src/app/auth/signup/signup.component.css","webpack:///./src/app/auth/signup/signup.component.html","webpack:///./src/app/auth/signup/signup.component.ts","webpack:///./src/app/communication.service.ts","webpack:///./src/app/directives/auto-set-rows.directive.ts","webpack:///./src/app/directives/get-position.directive.ts","webpack:///./src/app/directives/highlight.directive.ts","webpack:///./src/app/directives/mathjax.directive.ts","webpack:///./src/app/doc-display/doc-display.component.css","webpack:///./src/app/doc-display/doc-display.component.html","webpack:///./src/app/doc-display/doc-display.component.ts","webpack:///./src/app/entities/entities.component.css","webpack:///./src/app/entities/entities.component.html","webpack:///./src/app/entities/entities.component.ts","webpack:///./src/app/entities/entities.service.ts","webpack:///./src/app/entity-detail/annotations-search-tips-bottom-sheet.html","webpack:///./src/app/entity-detail/entity-detail.component.html","webpack:///./src/app/entity-detail/entity-detail.component.scss","webpack:///./src/app/entity-detail/entity-detail.component.ts","webpack:///./src/app/entity-documents/entity-documents.service.ts","webpack:///./src/app/footer/footer.component.css","webpack:///./src/app/footer/footer.component.html","webpack:///./src/app/footer/footer.component.ts","webpack:///./src/app/header/header.component.css","webpack:///./src/app/header/header.component.html","webpack:///./src/app/header/header.component.ts","webpack:///./src/app/helpers/mime-type.validator.ts","webpack:///./src/app/my-library/my-library.component.css","webpack:///./src/app/my-library/my-library.component.html","webpack:///./src/app/my-library/my-library.component.ts","webpack:///./src/app/pipes/highlight-keywords.pipe.ts","webpack:///./src/app/pipes/shorten.pipe.ts","webpack:///./src/app/profile/profile.component.css","webpack:///./src/app/profile/profile.component.html","webpack:///./src/app/profile/profile.component.ts","webpack:///./src/app/support-feedback/support-feedback.component.css","webpack:///./src/app/support-feedback/support-feedback.component.html","webpack:///./src/app/support-feedback/support-feedback.component.ts","webpack:///./src/app/support-feedback/support-feedback.service.ts","webpack:///./src/app/tutorials/tutorials.component.css","webpack:///./src/app/tutorials/tutorials.component.html","webpack:///./src/app/tutorials/tutorials.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///zlib (ignored)","webpack:///fs (ignored)","webpack:///http (ignored)","webpack:///https (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"<b>\\n  What is an annotation?\\n</b>\\n\\n<p>\\n  An annotation is a note of explanation, comment or question\\n  added to a text to help us better understand the text itself.\\n</p>\\n\\n<b *ngIf=\\\"entityType==='my-library'\\\">\\n  What can I do?\\n</b>\\n\\n<p *ngIf=\\\"entityType==='my-library'\\\">\\n  In <b>My Library</b>, annotations you created are only for yourself.\\n  You can highlight the important parts of a document and add explanation\\n  or your own interpretation. Or you can highlight the parts of a document\\n  that you don't understand very well at the moment and come back to it latter.\\n</p>\\n\\n<b *ngIf=\\\"entityType!=='my-library'\\\">\\n  In a group or class, annotations you created are shared with every member.\\n  You can share your insight to the important part of the text with your peers.\\n  Or you can post a question to the part of the text you don't understand.\\n  Your question can well be many other people's question. Of course,\\n  collective annotating is a community-driven activity,\\n  you should also respond to questions posted by other memebers of your\\n  group or class.\\n</b>\\n\\n<b>\\n  What's new on Interpolate?\\n</b>\\n\\n<p>\\n  On Interpolate, not only you can respond to an annotation,\\n  you can also respond to an existing response, <i>i.e.</i>\\n  you can have a threaded discussion with other members.\\n  The very begining of the threaded discussion is called the\\n  \\\"root annotation\\\".\\n</p>\\n\\n<b>\\n  How to create annotation?\\n</b>\\n<p>\\n  Click on \\\"New Annotation\\\" button in the toolbar.\\n</p>\\n\"","module.exports = \"\\n\\n\\n.pdf-display {\\n  width: 60%;\\n  float:left;\\n  overflow:auto;\\n} canvas {\\n  max-width:200%;\\n} hr {\\n  border-color:black;\\n} mat-card.ann-create-and-update-form{\\n  float:right;\\n  right:0%;\\n  bottom:0%;\\n  position:fixed;\\n  width:40%;\\n  height:60%;\\n  z-index:10;\\n} mat-form-field{\\n  width: 100%;\\n} .search-bar {\\n  margin-top:5%;\\n  width:90%;\\n} .example-fill-remaining-space {\\n  /* This fills the remaining space, by using flexbox.\\n     Every toolbar row uses a flexbox row layout. */\\n  flex: 1 1 auto;\\n} mat-form-field.page-navigation {\\n  width: 100px;\\n} mat-tab-group.annotations-display {\\n  width: 38%;\\n  float:right;\\n  margin-right: 2%\\n} .content-display-panel {\\n  margin-left:2%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYW5ub3RhdGlvbnMvYW5ub3RhdGlvbnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFHQTtFQUNFLFdBQVc7RUFDWCxXQUFXO0VBQ1gsY0FBYztDQUNmLENBQUM7RUFDQSxlQUFlO0NBQ2hCLENBRUQ7RUFDRSxtQkFBbUI7Q0FDcEIsQ0FFRDtFQUNFLFlBQVk7RUFDWixTQUFTO0VBQ1QsVUFBVTtFQUNWLGVBQWU7RUFDZixVQUFVO0VBQ1YsV0FBVztFQUNYLFdBQVc7Q0FDWixDQUFDO0VBQ0EsWUFBWTtDQUNiLENBRUQ7RUFDRSxjQUFjO0VBQ2QsVUFBVTtDQUNYLENBRUQ7RUFDRTtvREFDa0Q7RUFDbEQsZUFBZTtDQUNoQixDQUVEO0VBQ0UsYUFBYTtDQUNkLENBRUQ7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFnQjtDQUNqQixDQUVEO0VBQ0UsZUFBZTtDQUNoQiIsImZpbGUiOiJzcmMvYXBwL2Fubm90YXRpb25zL2Fubm90YXRpb25zLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuXG4ucGRmLWRpc3BsYXkge1xuICB3aWR0aDogNjAlO1xuICBmbG9hdDpsZWZ0O1xuICBvdmVyZmxvdzphdXRvO1xufSBjYW52YXMge1xuICBtYXgtd2lkdGg6MjAwJTtcbn1cblxuaHIge1xuICBib3JkZXItY29sb3I6YmxhY2s7XG59XG5cbm1hdC1jYXJkLmFubi1jcmVhdGUtYW5kLXVwZGF0ZS1mb3Jte1xuICBmbG9hdDpyaWdodDtcbiAgcmlnaHQ6MCU7XG4gIGJvdHRvbTowJTtcbiAgcG9zaXRpb246Zml4ZWQ7XG4gIHdpZHRoOjQwJTtcbiAgaGVpZ2h0OjYwJTtcbiAgei1pbmRleDoxMDtcbn0gbWF0LWZvcm0tZmllbGR7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uc2VhcmNoLWJhciB7XG4gIG1hcmdpbi10b3A6NSU7XG4gIHdpZHRoOjkwJTtcbn1cblxuLmV4YW1wbGUtZmlsbC1yZW1haW5pbmctc3BhY2Uge1xuICAvKiBUaGlzIGZpbGxzIHRoZSByZW1haW5pbmcgc3BhY2UsIGJ5IHVzaW5nIGZsZXhib3guXG4gICAgIEV2ZXJ5IHRvb2xiYXIgcm93IHVzZXMgYSBmbGV4Ym94IHJvdyBsYXlvdXQuICovXG4gIGZsZXg6IDEgMSBhdXRvO1xufVxuXG5tYXQtZm9ybS1maWVsZC5wYWdlLW5hdmlnYXRpb24ge1xuICB3aWR0aDogMTAwcHg7XG59XG5cbm1hdC10YWItZ3JvdXAuYW5ub3RhdGlvbnMtZGlzcGxheSB7XG4gIHdpZHRoOiAzOCU7XG4gIGZsb2F0OnJpZ2h0O1xuICBtYXJnaW4tcmlnaHQ6IDIlXG59XG5cbi5jb250ZW50LWRpc3BsYXktcGFuZWwge1xuICBtYXJnaW4tbGVmdDoyJTtcbn1cbiJdfQ== */\"","module.exports = \"\\n<mat-toolbar>\\n  <mat-toolbar-row>\\n  <mat-chip-list>\\n    <mat-chip>\\n      {{ documentTitle }}\\n    </mat-chip>\\n  </mat-chip-list>\\n\\n  <button mat-button color=\\\"primary\\\"\\n  (click)=\\\"displayDocument()\\\">\\n  View Full Document\\n  </button>\\n\\n  <button mat-button color=\\\"primary\\\"\\n  (click)=\\\"toPreviousPage()\\\">\\n    <mat-icon>keyboard_arrow_left</mat-icon>\\n  </button>\\n\\n  <mat-form-field class=\\\"page-navigation\\\">\\n    <input matInput (keydown.enter)=\\\"navigateTo($event)\\\"\\n    placeholder=\\\"{{page}} of {{ maxPage }}\\\">\\n  </mat-form-field>\\n\\n  <button mat-button color=\\\"primary\\\"\\n  (click)=\\\"toNextPage()\\\">\\n    <mat-icon>keyboard_arrow_right</mat-icon>\\n  </button>\\n\\n  <button mat-button  color=\\\"primary\\\" selected\\n  matTooltip=\\\"start a new annotation thread\\\" type=\\\"button\\\"\\n  (click)=\\\"startNewThread()\\\">\\n    <mat-icon>add</mat-icon>\\n    <span>New Annotation</span>\\n  </button>\\n\\n  <button mat-button  color=\\\"primary\\\" selected\\n  (click)=\\\"showTips()\\\"\\n  matTooltip=\\\"See what you can do\\\" type=\\\"button\\\">\\n    <span>Tips</span>\\n  </button>\\n\\n\\n  </mat-toolbar-row>\\n</mat-toolbar>\\n\\n\\n<div>\\n\\n<div class=\\\"pdf-display\\\">\\n  <canvas\\n    #pdfDisplay\\n    (mousedown)=\\\"mousedown($event)\\\"\\n    (mousemove)=\\\"mousemove($event)\\\"\\n    (mouseup)=\\\"mouseup($event)\\\"\\n  id=\\\"the-canvas\\\">\\n  </canvas>\\n</div>\\n\\n<mat-tab-group\\nclass=\\\"annotations-display\\\"\\n[(selectedIndex)]=\\\"selectedIndex\\\"\\n(selectedTabChange)=\\\"onSelectedTabChange($event)\\\">\\n  <mat-tab label=\\\"Annotations\\\">\\n\\n    <mat-form-field class=\\\"search-bar\\\">\\n      <input matInput\\n      placeholder=\\\"search and filters annotations created in this document \\\"\\n      (keyup.backspace)=\\\"search($event)\\\"\\n      (keydown.enter)=\\\"search($event)\\\">\\n    </mat-form-field>\\n\\n    <p class=\\\"text text-info\\\" *ngIf=\\\"message\\\">\\n      {{message}}\\n    </p>\\n\\n    <h3 class=\\\"text text-info\\\"\\n    *ngIf=\\\"documentId && annList.length==0 && getMethod=='regular'\\\">\\n      No annotations has been created on page {{ page }}\\n    </h3>\\n\\n    <h3 class=\\\"text text-info\\\"\\n    *ngIf=\\\"documentId && annList.length>0 && getMethod=='regular'\\\">\\n      Root annotations on page {{ page }}\\n    </h3>\\n\\n\\n    <h3 class=\\\"text text-info\\\"\\n    *ngIf=\\\"annList.length==0 && getMethod=='search'\\\">\\n      No annotations match your search\\n    </h3>\\n\\n    <div>\\n      <div *ngFor=\\\"let ann of annList\\\">\\n        <a style=\\\"cursor: pointer\\\" (click)=\\\"viewChildren(ann)\\\">\\n          <h4>\\n          Annotation created by {{ann.creatorName}} on\\n          {{ ann.docTitle }} page {{ ann.page }}\\n          </h4>\\n        </a>\\n        <div>\\n          <p mathJax=\\\"{{ann.title}}\\\"></p>\\n          <p mathJax=\\\"{{ann.content }}\\\"></p>\\n        </div>\\n        <hr>\\n      </div>\\n    </div>\\n\\n  </mat-tab>\\n\\n  <mat-tab label=\\\"Seleted branch\\\">\\n    <h3 class=\\\"text text-info\\\" *ngIf=\\\"branch.length==0\\\">\\n      No branch is selected\\n    </h3>\\n\\n    <div *ngFor=\\\"let ann of branch\\\" [ngStyle]=\\\"{\\n      'margin-left': branch.indexOf(ann)===0? '0': '10px'\\n    }\\\">\\n\\n      <div id=\\\"branchElementContent\\\">\\n        <p class=\\\"text text-info\\\" *ngIf=\\\"branch.indexOf(ann)>0\\\">\\n          Response created by {{ ann.creatorName }}\\n        </p>\\n\\n        <p class=\\\"text text-info\\\" *ngIf=\\\"branch.indexOf(ann)===0\\\">\\n          Node of current branch created by {{ ann.creatorName }}\\n        </p>\\n\\n        <p mathJax=\\\"{{ann.title}}\\\">\\n        </p>\\n        <p mathJax=\\\"{{ann.content}}\\\">\\n        </p>\\n      </div>\\n\\n      <div>\\n        <button mat-button color=\\\"primary\\\"\\n        matTooltip=\\\"reply this annotation\\\"\\n        (click)=\\\"reply(ann)\\\">\\n          <mat-icon>reply</mat-icon>\\n        </button>\\n\\n        <button mat-button color=\\\"primary\\\"\\n        matTooltip=\\\"edit this annotation\\\"\\n        (click)=\\\"edit(ann)\\\">\\n          <mat-icon>edit</mat-icon>\\n        </button>\\n\\n        <button mat-button color=\\\"primary\\\"\\n        *ngIf=\\\"branch.indexOf(ann)==0 && ann.parent!=='root'\\\"\\n        matTooltip=\\\"view parent annotation\\\"\\n        (click)=\\\"viewParent(ann)\\\">\\n          <mat-icon>expand_less</mat-icon>\\n        </button>\\n\\n\\n        <button mat-button color=\\\"primary\\\"\\n        *ngIf=\\\"branch.indexOf(ann)>0 && ann.children.length > 0\\\"\\n        matBadge=\\\"{{ ann.children.length }}\\\" color=\\\"primary\\\"\\n        matTooltip=\\\"view children annotations\\\"\\n        (click)=\\\"viewChildren(ann)\\\">\\n          <mat-icon >\\n            expand_more\\n          </mat-icon>\\n        </button>\\n\\n        <button mat-button  matTooltip=\\\"show highlight\\\"\\n          color=\\\"primary\\\"\\n          *ngIf=\\\"ann.highlightsCoord.length > 0 && !highlightDisplayed\\\"\\n          (click)=\\\"showHighlight(ann)\\\">\\n          <mat-icon>highlight</mat-icon>\\n        </button >\\n\\n        <button mat-button  matTooltip=\\\"clear highlight\\\"\\n          color=\\\"primary\\\"\\n          *ngIf=\\\"ann.highlightsCoord.length > 0 && highlightDisplayed\\\"\\n          (click)=\\\"clearHighlight()\\\">\\n          <mat-icon>refresh</mat-icon>\\n        </button >\\n\\n        <button mat-button color=\\\"primary\\\"\\n        [matMenuTriggerFor]=\\\"annInfo\\\">\\n          <mat-icon>info_outline</mat-icon>\\n        </button>\\n\\n        <mat-menu #annInfo=\\\"matMenu\\\">\\n          <mat-list>\\n\\n            <mat-list-item>\\n              id: {{ ann._id }}\\n            </mat-list-item>\\n           <mat-list-item>\\n             document id: {{ ann.documentId }}\\n           </mat-list-item>\\n           <mat-list-item>\\n             page: {{ ann.page }}\\n           </mat-list-item>\\n           <mat-list-item>\\n             created by: {{ ann.creatorName }}\\n           </mat-list-item>\\n           <mat-list-item>\\n             created on: {{ timestampToDate(ann.createTime) }}\\n           </mat-list-item>\\n           <mat-list-item *ngIf=\\\"ann.editorName\\\">\\n             edited by: {{ ann.editorName }}\\n           </mat-list-item>\\n           <mat-list-item *ngIf=\\\"ann.lastEditTime\\\">\\n             last edited on: {{ timestampToDate(ann.lastEditTime) }}\\n           </mat-list-item>\\n           <mat-list-item *ngIf=\\\"ann.parent!='root'\\\">\\n             parent annotation: {{ ann.parent }}\\n           </mat-list-item>\\n          </mat-list>\\n\\n\\n\\n        </mat-menu>\\n\\n        <button mat-button color=\\\"warn\\\"\\n        *ngIf=\\\"ann.creatorName==userName\\n        && ann.children.length==0\\\"\\n        (click)=\\\"delete(ann)\\\"\\n        matTooltip=\\\"delete\\\">\\n          <mat-icon>delete</mat-icon>\\n        </button>\\n      </div>\\n      <hr color=\\\"black\\\">\\n    </div>\\n  </mat-tab>\\n\\n</mat-tab-group>\\n</div>\\n\\n<mat-card class=\\\"ann-create-and-update-form\\\" *ngIf=\\\"showAnnCreateForm\\\">\\n  <b *ngIf=\\\"mode=='create'\\\">\\n    Creating an annotation on page {{page}} of {{ documentId }}\\n  </b>\\n\\n  <b *ngIf=\\\"mode=='reply'\\\">\\n    Replying an annotation on page {{page}} of {{ documentId }}\\n  </b>\\n\\n  <form [formGroup]=\\\"annCreate\\\">\\n    <mat-form-field>\\n      <input matInput rows=\\\"2\\\" type=\\\"text\\\" formControlName=\\\"title\\\"\\n      placeholder=\\\"Title (optional) (supports html and latex syntax)\\\">\\n        <!--local reference #title to be parsed to the directive *ngIf -->\\n    </mat-form-field>\\n\\n    <mat-form-field>\\n      <textarea matInput appAutoSetRows formControlName=\\\"content\\\"\\n        placeholder=\\\"Content (supports html and latex syntax)\\\">\\n      </textarea>\\n\\n      <mat-error *ngIf=\\\"annCreate.get('content').invalid\\\">\\n        Please enter some content.\\n      </mat-error>\\n    </mat-form-field>\\n  </form>\\n\\n  <mat-card-actions>\\n    <button mat-button color=\\\"primary\\\" (click)=\\\"createAnn()\\\">\\n      <mat-icon>save</mat-icon>\\n    </button>\\n\\n    <button mat-button\\n    [ngStyle]=\\\"{'background': inHighlightMode==true? '#00b8e6': 'white'}\\\"\\n    color=\\\"primary\\\" *ngIf=\\\"mode==='create'\\\"\\n    (click)=\\\"addHighlight($event)\\\"\\n    matTooltip=\\\"add highlgiht\\\">\\n      <mat-icon>brush</mat-icon>\\n    </button>\\n\\n    <button mat-button (click)=\\\"clearHighlight()\\\"\\n      color=\\\"primary\\\" *ngIf=\\\"mode==='create'\\\"\\n      matTooltip=\\\"clear highlight\\\">\\n      <mat-icon>refresh</mat-icon>\\n    </button>\\n\\n    <button mat-button color=\\\"primary\\\"\\n    matTooltip=\\\"discard\\\" (click)=\\\"discard()\\\">\\n      <mat-icon>delete</mat-icon>\\n    </button>\\n  </mat-card-actions>\\n</mat-card>\\n\\n<mat-card class=\\\"ann-create-and-update-form\\\" *ngIf=\\\"showAnnUpdateForm\\\">\\n  <b>\\n    Editing an annotation on page {{page}} of {{ documentId }}\\n  </b>\\n\\n  <form [formGroup]=\\\"annUpdate\\\">\\n    <mat-form-field>\\n      <input matInput rows=\\\"2\\\" type=\\\"text\\\" formControlName=\\\"title\\\"\\n      placeholder=\\\"Title (optional) (supports html and latex syntax)\\\">\\n        <!--local reference #title to be parsed to the directive *ngIf -->\\n    </mat-form-field>\\n\\n    <mat-form-field>\\n      <textarea matInput appAutoSetRows formControlName=\\\"content\\\"\\n        placeholder=\\\"Content (supports html and latex syntax)\\\">\\n      </textarea>\\n\\n      <mat-error *ngIf=\\\"annCreate.get('content').invalid\\\">\\n        Please enter some content.\\n      </mat-error>\\n    </mat-form-field>\\n  </form>\\n\\n    <mat-card-actions>\\n      <button mat-button color=\\\"primary\\\" (click)=\\\"updateAnn()\\\">\\n        <mat-icon>save</mat-icon>\\n      </button>\\n\\n      <button mat-button color=\\\"primary\\\"\\n      matTooltip=\\\"discard\\\" (click)=\\\"discard()\\\">\\n        <mat-icon>delete</mat-icon>\\n      </button>\\n\\n    </mat-card-actions>\\n</mat-card>\\n\"","// make this component a child component of doc-display\n// page number only goes from doc-display to\n\n\nimport { Component, OnInit, OnChanges, ViewChild, ElementRef,\n  SimpleChanges, Input, Output, EventEmitter } from '@angular/core';\nimport { PageEvent } from '@angular/material';\nimport { Router, ActivatedRoute, ParamMap } from \"@angular/router\";\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { Annotation } from \"@app/models/annotation.model\";\nimport { HighlightCoord } from \"@app/models/highlightCoord\";\nimport { AnnotationsService } from \"./annotations.service\";\nimport { Subscription } from \"rxjs\";\nimport { CommunicationService } from \"@app/communication.service\";\nimport { EntityDocumentsService } from\n\"@app/entity-documents/entity-documents.service\";\nimport { environment } from \"@env/environment\";\nimport { MatTabChangeEvent } from \"@angular/material\";\n\nimport { MatBottomSheet, MatBottomSheetRef} from '@angular/material';\nimport{ Inject } from \"@angular/core\";\nimport { MAT_BOTTOM_SHEET_DATA } from '@angular/material';\n\n\nimport { PDFJSStatic, PDFDocumentProxy, PDFPromise } from 'pdfjs-dist';\n// then import the actual library using require() instead of import\nconst pdfjs = require(\"pdfjs-dist\");\n// @reference: https://github.com/mozilla/pdf.js/issues/7909\npdfjs.GlobalWorkerOptions.workerSrc = 'assets/pdfjs/build/pdf.worker.js';\n\n\n\ninterface Query {\n  documentId:string,\n  page: number,\n}\n\ninterface Filter {\n  creatorName: string,\n  editorName: string,\n  documentId: string,\n  page: number,\n  parent: string,\n};\n\ninterface SearchQuery {\n  keywords: string,\n  entityType: string,\n  entityId:string,\n  filter: Filter,\n}\n\n@Component({\n  selector: 'app-annotations',\n  templateUrl: './annotations.component.html',\n  styleUrls: ['./annotations.component.css']\n})\nexport class AnnotationsComponent implements OnInit {\n  @Output() displayFullDoc: EventEmitter<boolean> = new EventEmitter;\n\n  // ownership\n  public userName:string;\n\n  //document page\n  @Input() page: number;\n  @Input() documentTitle:string;\n  @Input() documentId: string;\n  @Input() documentUrl: string; // url of pdf document\n\n  @Input() nodeAnnotationId:string;\n\n  @ViewChild('pdfDisplay') pdfDisplay : ElementRef;\n\n\n  private entityType:string;\n  private entityId:string;\n  public entity:string;\n\n  private getQuery: Query;\n\n  public annCreate: FormGroup;\n  public annUpdate: FormGroup;\n\n  private sub : Subscription;\n\n  // all annotations in the entity or document\n  // from the service\n  public annList : Annotation[]=[];\n  public getMethod: string = \"regular\"\n\n  public branch: Annotation[] = [];\n\n  public selectedIndex:number = 0;\n\n  // pagination\n  public totalAnns: number;\n  public pageSize = 10;\n  public currentPage = 1;\n\n\n  // create ann\n  public showAnnCreateForm:boolean = false;\n  public inHighlightMode:boolean = false;\n  private highlightsCoord: HighlightCoord[]=[];\n  public textareaRows : number = 10;\n\n\n  public mode:string = \"create\";\n  public showAnnUpdateForm: boolean = false;\n  private highlightDisplayed :boolean = false;\n\n  // filter and search\n  public message:string;\n  public keywordsStr:string = \"\";\n\n  // document\n  private scale = 1.2 // viewpoint scale;\n  public maxPage: number;\n  //highlight\n  private initX: number;\n  private initY: number;\n  private finalX: number;\n  private finalY: number;\n  private startingPoint: number;\n  private mouseDown : boolean = false;\n\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private mainService: AnnotationsService,\n    private comm: CommunicationService,\n    private docsService: EntityDocumentsService,\n    private bottomSheet: MatBottomSheet,\n  ) {\n\n  }\n\n  ngOnChanges(changes: SimpleChanges){\n    if(!this.page){\n      this.page = 1;\n    }\n\n    this.renderPage(this.page);\n  }\n\n  ngOnInit() {\n\n    if(!this.page){\n      this.page = 1;\n    }\n\n    if(this.nodeAnnotationId){\n      this.mainService.setBranch(this.nodeAnnotationId);\n    }\n\n    //pdfjs.GlobalWorkerOptions.workerSrc = '/assets/pdfjs/build/pdf.worker.js';\n    //this.renderPage(this.page)\n\n    this.userName = localStorage.getItem(\"userName\");\n\n    this.route.paramMap.subscribe(\n      (paramMap: ParamMap) => {\n        this.entityType = paramMap.get(\"entityType\");\n        this.entityId = paramMap.get(\"entityId\")\n        if(this.entityType == null){\n          this.entityType = \"my-library\";\n          this.entityId = \"my-library\"\n        }\n      }\n    );\n\n    if(this.entityType==\"classes\"){\n      this.entity = \"class\"\n    }\n\n    if(this.entityType==\"groups\"){\n      this.entity = \"group\"\n    }\n\n    if(this.entityType==\"my-library\"){\n      this.entity = \"library\"\n    }\n\n    this.annCreate = new FormGroup({\n\n      title: new FormControl(null),\n\n      content: new FormControl(null,\n      {\n        validators: [Validators.required]\n      }),\n      parent: new FormControl(null),\n    });\n\n    this.annUpdate = new FormGroup({\n      _id: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n\n      title: new FormControl(null, {\n        validators: []\n      }),\n      content: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n\n      highlightsCoord: new FormControl(null),\n\n      parent: new FormControl(null),\n\n      children: new FormControl(null),\n\n      creatorName: new FormControl(null,\n      {\n        validators: [Validators.required]\n      }),\n\n      annListIdx: new FormControl(null,\n      {\n        validators: [Validators.required]\n      }),\n\n      branchIdx: new FormControl(null,\n      {\n        validators: [Validators.required]\n      }),\n    });\n\n    this.getRootAnns(this.page);\n\n\n    this.sub = this.mainService.annListUpdated\n    .subscribe(\n      res => {\n        this.annList = res.annotations;\n        this.getMethod = res.getMethod;\n      }\n    );\n\n    this.sub = this.mainService.branchUpdated\n    .subscribe(\n      res => {\n        this.branch = res;\n        console.log(\"new branch\", this.branch);\n\n        this.selectedIndex = 1;\n      }\n    );\n\n    // dynamically determine number of rows in textarea\n\n  }\n\n\n\n\n  renderPage(page: number){\n    /*\n    reference for using pdfjs module\n    https://mozilla.github.io/pdf.js/examples/\n    */\n\n    pdfjs.getDocument(this.documentUrl).then(\n      (pdf: PDFDocumentProxy) => {\n        this.maxPage = pdf.numPages;\n        pdf.getPage(page).then(\n          currentPage => {\n            const viewport = currentPage.getViewport(this.scale);\n\n\n            //let canvas = <HTMLCanvasElement>document.getElementById(\"the-canvas\");\n            const canvas = <HTMLCanvasElement>this.pdfDisplay.nativeElement;\n            const context = canvas.getContext(\"2d\");\n            canvas.height = viewport.height;\n            canvas.width = viewport.width;\n\n            const renderContext = {\n              canvasContext: context,\n              viewport: viewport\n            }\n\n            currentPage.render(renderContext).then(\n              () => {\n                //console.log(\"page rendered\")\n              }\n            )\n\n          }\n        )\n      }\n    );\n  }\n\n  displayDocument(){\n    this.displayFullDoc.emit(true);\n  }\n  // document\n\n  toPreviousPage(){\n    if(this.page > 1){\n      //this.safeUpdatePage(-1);\n      this._beforeUpdatePage();\n      this.page--;\n      this._afterUpdatePage(this.page);\n    }\n  }\n\n  toNextPage(){\n    if(this.page < this.maxPage){\n      //this.safeUpdatePage(+1);\n\n      this._beforeUpdatePage();\n\n      this.page++;\n      this._afterUpdatePage(this.page);\n    }\n  }\n\n  showTips(){\n    this.bottomSheet.open(AnnotationsComponentTipsBottomSheet,\n      {\n        data: {\n          entityType: this.entityType,\n          entity: this.entity,\n        }\n      });\n  }\n\n  private _beforeUpdatePage(): void {\n    this.highlightDisplayed = false;\n    this.inHighlightMode = false;\n    this.highlightsCoord = [];\n  }\n\n  private _afterUpdatePage(page: number): void {\n    this.renderPage(page);\n    this.getRootAnns(page)\n  }\n\n  navigateTo(event: Event){\n\n    const navPage = parseInt((<HTMLInputElement>event.target).value, 10);\n\n    if(isNaN(navPage)){\n      //this.router.navigate([\"groups\", this.groupName, this.groupId, this.litId]);\n      return;\n    }else{\n      this._beforeUpdatePage()\n\n      if(navPage < 1){\n        this.page = 1;\n\n\n      } else if(navPage > this.maxPage){\n        this.page = this.maxPage;\n\n      } else{\n        this.page = navPage;\n      }\n\n      this._afterUpdatePage(this.page);\n\n      (<HTMLInputElement>event.target).value = \"\";\n      return;\n    }\n  }\n\n  clearHighlight() {\n    this._beforeUpdatePage();\n\n    this.renderPage(this.page);\n\n    this._setCursorStyle();\n\n    return new Promise((resolve, reject)=> {\n      resolve(true);\n    })\n  }\n\n  mousedown(event: MouseEvent){\n    if(this.inHighlightMode){\n      let totalOffsetX = 0;\n      let totalOffsetY = 0;\n      let canvasX = 0;\n      let canvasY = 0;\n\n      let currentElement = event.target as HTMLCanvasElement;\n\n      do{\n          totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n          totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n      }\n      while(currentElement = (currentElement.offsetParent as HTMLCanvasElement))\n\n      canvasX = event.pageX - totalOffsetX;\n      canvasY = event.pageY - totalOffsetY;\n\n      this.initX = canvasX;\n      this.initY = canvasY;\n      this.startingPoint = canvasX;\n\n      this.mouseDown = true;\n    }\n  }\n\n  mousemove(event: MouseEvent){\n    if(this.inHighlightMode && this.mouseDown){\n      let totalOffsetX = 0;\n      let totalOffsetY = 0;\n      let canvasX = 0;\n      let canvasY = 0;\n      let currentElement = event.target as HTMLCanvasElement;\n\n      do{\n          totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n          totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n      }\n      while(currentElement = (currentElement.offsetParent as HTMLCanvasElement))\n\n      canvasX = event.pageX - totalOffsetX;\n      canvasY = event.pageY - totalOffsetY;\n\n      let canvas = event.target as HTMLCanvasElement;\n      let ctx = canvas.getContext(\"2d\");\n\n      ctx.beginPath();\n      ctx.moveTo(this.startingPoint,this.initY);\n      ctx.lineTo(canvasX, this.initY);\n      ctx.strokeStyle= environment.strokeStyle;\n      ctx.globalAlpha = environment.globalAlpha;\n      ctx.lineWidth = environment.lineWidth;\n      ctx.stroke();\n      this.startingPoint = canvasX;\n      }\n  }\n  mouseup(event: MouseEvent){\n    if(this.inHighlightMode){\n      let totalOffsetX = 0;\n      let totalOffsetY = 0;\n      let canvasX = 0;\n      let canvasY = 0;\n      let currentElement = event.target as HTMLCanvasElement;\n\n      do{\n          totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n          totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n      }\n      while(currentElement = (currentElement.offsetParent as HTMLCanvasElement))\n\n      canvasX = event.pageX - totalOffsetX;\n      canvasY = event.pageY - totalOffsetY;\n\n      this.finalX = canvasX;\n      this.finalY = canvasY;\n\n      let highlightCoord : HighlightCoord = {\n        initX: this.initX,\n        initY: this.initY,\n        finalX: this.finalX,\n      }\n\n      this.highlightsCoord.push(highlightCoord);\n      this.mouseDown = false;\n    }\n  }\n\n  getRootAnns(page: number) {\n    this.inHighlightMode = false;\n    this.highlightDisplayed = false;\n    if(this.showAnnCreateForm || this.showAnnUpdateForm){\n      this.annCreate.reset();\n      this.annUpdate.reset();\n\n      this.highlightsCoord = [];\n      this.inHighlightMode = false;\n\n      this.showAnnCreateForm = false;\n      this.showAnnUpdateForm = false;\n    }\n\n\n    this.getQuery = {\n      documentId: this.documentId,\n      page: page,\n    }\n\n    console.log(\"getting root annotations\", this.getQuery);\n\n    this.mainService.getAnnotations(this.getQuery);\n    //this.branch = []\n  }\n\n  isNode(ann:Annotation, branch:Annotation[]): boolean {\n    if(branch.indexOf(ann) === 0 ){\n      return true;\n    }else{\n      return false\n    }\n  }\n\n  onSelectedTabChange(event: MatTabChangeEvent){\n    //this.selectedIndex = event.index;\n\n    if(event.index == 0 && this.highlightDisplayed){\n      this.clearHighlight();\n    }\n\n    if(event.index == 0){\n      this.getQuery = {\n        page : this.page,\n        documentId: this.documentId\n      }\n\n      this.mainService.getAnnotations(this.getQuery)\n    }\n\n    // If back to the root annotation panel\n    // clean highlight from the current tree\n  }\n  // pagination\n\n  onChangePagination(pageData: PageEvent){\n\n    this.pageSize = pageData.pageSize;\n    this.currentPage = pageData.pageIndex + 1;\n    //this.getQuery.pageSize = this.pageSize;\n    //this.getQuery.currentPage = this.currentPage;\n\n    //this.mainService.getAnnotations(this.getQuery)\n\n  }\n\n  startNewThread(){\n    this.mode=\"create\"\n    this.showAnnCreateForm = true;\n    this.selectedIndex = 0;\n    //this.clearHighlight();\n  }\n\n  createAnn(){\n    if(this.annCreate.invalid){\n      return;\n    }\n\n    const annotation : Annotation = {\n      _id: null,\n      entityType: this.entityType,\n      entityId: this.entityId,\n      documentId: this.documentId,\n      creatorId: null,\n      creatorName: this.userName,\n      title: this.annCreate.value.title,\n      content: this.annCreate.value.content,\n      page: this.page,\n      highlightsCoord: this.highlightsCoord,\n      createTime:Date.now(),\n      lastEditTime: null,\n      followedBy: [],\n      viewedBy:[],\n      parent: this.annCreate.value.parent?\n        this.annCreate.value.parent : \"root\",\n      children: []\n    }\n\n    this.mainService.createAnnotation(annotation);\n\n    this.annCreate.reset();\n\n    if(this.inHighlightMode || this.highlightsCoord.length > 0){\n      this.highlightsCoord = [];\n      this.inHighlightMode = false;\n      this.clearHighlight();\n    }\n\n    this.showAnnCreateForm=false;\n  }\n\n  updateAnn(){\n    if(this.annUpdate.invalid){\n      return;\n    }\n\n    const annotation : Annotation = {\n      _id: this.annUpdate.value._id,\n      entityType: this.entityType,\n      entityId: this.entityId,\n      documentId: this.documentId,\n      creatorId: null,\n      creatorName: this.annUpdate.value.creatorName,\n      title: this.annUpdate.value.title,\n      content: this.annUpdate.value.content,\n      page: this.page,\n      highlightsCoord: this.annUpdate.value.highlightsCoord,\n      createTime:Date.now(),\n      lastEditTime: null,\n      followedBy: [],\n      viewedBy:[],\n      parent: this.annUpdate.value.parent?\n        this.annUpdate.value.parent : \"root\",\n      children: this.annUpdate.value.children,\n    }\n\n    this.mainService.updateAnnotation(\n      annotation,\n      this.annUpdate.value.annListIdx,\n      this.annUpdate.value.branchIdx\n    );\n\n    this.annUpdate.reset();\n    this.highlightsCoord = [];\n    this.inHighlightMode = false;\n    this.showAnnUpdateForm=false;\n\n  }\n\n  addHighlight(event: Event){\n    this.inHighlightMode = !this.inHighlightMode;\n    //const button = event.target;\n    this._setCursorStyle();\n  }\n\n  private _setCursorStyle(){\n    if(this.inHighlightMode){\n      //@Todo change the cursor to brush\n      this.pdfDisplay.nativeElement.style.cursor = \"text\"\n    }else{\n      this.pdfDisplay.nativeElement.style.cursor = \"default\"\n    }\n  }\n\n  discard(){\n    this.showAnnCreateForm = false;\n    this.annCreate.reset();\n\n    this.showAnnUpdateForm = false;\n    this.annUpdate.reset();\n\n    if(this.inHighlightMode){\n      this.clearHighlight();\n      this.inHighlightMode = false;\n      //this.comm.inHighlightMode.next(false);\n    }\n  }\n\n  viewChildren(annotation: Annotation){\n    this._beforeUpdatePage();\n    this.page = annotation.page;\n\n    this.renderPage(this.page);\n    this.mainService.setBranch(annotation._id);\n\n  }\n\n  viewParent(annotation: Annotation){\n    this.mainService.setBranch(annotation.parent);\n    //this.comm.clearHighlight.next(true);\n  }\n\n\n  timestampToDate(timestamp: number) {\n    const date = new Date(timestamp);\n    return date.toString().split(\" \").slice(0,4).join(\" \");\n  }\n\n  reply(annotation:Annotation){\n    this.mode = \"reply\";\n\n    //this.updateDocIdAndPage(annotation);\n\n    this.annCreate.patchValue({\n      parent: annotation._id\n    })\n\n    // set current ann to node of a branch\n    //this.mainService.setBranch(annotation);\n    this.showAnnCreateForm = true;\n\n  }\n\n  edit(annotation: Annotation){\n    // show the highlight of the current annotation\n    this.mode = \"edit\";\n    this.annUpdate.setValue({\n      _id: annotation._id,\n      title: annotation.title,\n      content: annotation.content,\n      highlightsCoord: annotation.highlightsCoord,\n      parent: annotation.parent,\n      children: annotation.children,\n      creatorName: annotation.creatorName,\n      annListIdx: this.annList.indexOf(annotation),\n      branchIdx: this.branch.indexOf(annotation),\n    });\n    this.showAnnUpdateForm = true;\n  }\n\n\n  showHighlight(annotation: Annotation){\n    this.highlightDisplayed = true;\n\n    const canvas = document.getElementsByTagName(\"canvas\")[0];\n    const ctx = canvas.getContext(\"2d\");\n    for (let line of annotation.highlightsCoord){\n      ctx.beginPath();\n      ctx.moveTo(line.initX,line.initY);\n      ctx.lineTo(line.finalX, line.initY);\n      ctx.strokeStyle = environment.strokeStyle;\n      ctx.globalAlpha = environment.globalAlpha;\n      ctx.lineWidth = environment.lineWidth;\n      ctx.stroke();\n    }\n  }\n\n\n  delete(annotation: Annotation){\n    this.mainService.deleteAnnotation(\n      annotation,\n      this.getParentIndex(annotation)\n    );\n\n    if(this.highlightDisplayed){\n      this.clearHighlight();\n    }\n  }\n\n  private getParentIndex(annotation: Annotation){\n    if(annotation.parent == \"root\"){\n      return -1;\n    }else{\n      for(let ann of this.annList){\n        if(ann._id == annotation.parent){\n          return this.annList.indexOf(ann);\n          break;\n        }\n      }\n    }\n  }\n\n  //filter\n  search(event: Event){\n\n    const query = (<HTMLInputElement>event.target).value.trim();\n    if(query==\"\"){\n      this.getQuery = {\n        documentId: this.documentId,\n        page: this.page,\n      }\n      this.keywordsStr = \"\";\n      this.mainService.getAnnotations(this.getQuery);\n      return;\n    }\n\n\n\n    let filterStr:string;\n    let queryObject : SearchQuery;\n\n    if(query.indexOf(\"|\") > -1){\n      // if there is a pipeline, then get keywords as\n      // everything before the pipeline\n      const keywords = query.substr(0, query.indexOf(\"|\")).trim();\n\n      if(keywords === \"*\"){\n        this.keywordsStr = \"\";\n      }else{\n        this.keywordsStr = keywords;\n      }\n\n      filterStr = query.substr(query.indexOf(\"|\")+1).trim();\n      let filter = this.filterParse(filterStr);\n\n      if(filter != false){\n        filter = filter as Filter;\n\n        queryObject = {\n          keywords: keywords,\n          entityType: this.entityType,\n          entityId: this.entityId,\n          filter: filter\n        }\n\n      }else{\n        this.keywordsStr = \"\";\n        // invalid filter options\n        // display error message to users\n        return;\n      }\n    }else{\n      // keywords only, no filter options\n\n      if(query === \"*\"){\n        this.keywordsStr = \"\";\n      }else{\n        this.keywordsStr = query;\n      }\n\n      queryObject = {\n        keywords: query,\n        entityType: this.entityType,\n        entityId: this.entityId,\n        filter : {\n          creatorName: null,\n          editorName: null,\n          documentId: this.documentId,\n          page: null,\n          parent: null,\n        }\n      }\n    }\n\n    this.mainService.searchAnnotations(queryObject);\n  }\n\n  private filterParse (filterStr: string): boolean | Filter {\n    // return a javascript object\n    // get valid options\n    const optionList = [\n      \"--creator-name\", \"--editor-name\",\n      \"--document\", // by default, only document\n      \"--current-page\", // by default all pages\n      \"--root-only\", // by default, all annotations\n    ]\n\n    // check if filterStr has any invalid options\n    let possibleOptions = [];\n    for (let s of filterStr.split(\" \")){\n      if(s.startsWith(\"--\")){\n        possibleOptions.push(s);\n      }\n    }\n\n    let invalidOptions = [];\n    for (let op of possibleOptions){\n      if(optionList.indexOf(op) == -1){\n        invalidOptions.push(op)\n      }\n    }\n\n    if(invalidOptions.length > 0){\n      this.message = invalidOptions[0] + \" is an invalid option.\";\n      return false;\n\n    }else {\n      let filter : Filter = {\n        creatorName: null,\n        editorName: null,\n        documentId: null,\n        page: null,\n        parent:null,\n      };\n\n      for(let op of possibleOptions){\n        if(op==\"--creator-name\"){\n          if(this.valueOf(filterStr, op)!= false){\n            filter[\"creatorName\"] = this.valueOf(filterStr, op) as string;\n          }else{\n            this.message = \"you need supply a valid value for creatorName\";\n            return;\n          }\n        }\n\n        if(op==\"--editor-name\"){\n          if(this.valueOf(filterStr, op) != false){\n            filter[\"editorName\"] = this.valueOf(filterStr, op) as string;\n          }else{\n            this.message = \"you need to supply a valid value for editorName\";\n            return;\n          }\n\n        }\n\n        if(op==\"--document\"){\n          filter[\"documentId\"] = this.documentId;\n        }\n\n        if(op==\"--current-page\"){\n          filter[\"page\"] = this.page;\n          filter[\"documentId\"] = this.documentId;\n        }\n\n        if(op==\"--root-only\"){\n          filter[\"parent\"] = \"root\"\n        }\n      }\n\n      this.message = \"\";\n\n      return filter;\n\n    }\n\n  }\n\n  private valueOf(filterStr:string, option:string): boolean | string {\n    const list = filterStr.split(\" \");\n    const valueIdx = list.indexOf(option) + 1;\n    if(list[valueIdx].startsWith(\"--\")){\n      return false;\n    }else{\n      return list[valueIdx]\n    }\n  }\n\n  ngOnDestroy(){\n    this.sub.unsubscribe();\n  }\n}\n\n\n@Component({\n  //selector: 'bottom-sheet-overview-example-sheet',\n  templateUrl: 'annotations-component-tips-bottom-sheet.html',\n})\nexport class AnnotationsComponentTipsBottomSheet {\n  public entityType:string;\n  public entity:string\n\n  constructor(\n    @Inject(MAT_BOTTOM_SHEET_DATA) public data: any,\n    private bottomSheetRef: MatBottomSheetRef<AnnotationsComponentTipsBottomSheet>)\n    {}\n\n  ngOnInit(){\n    console.log(\"this data\", this.data);\n    this.entityType = this.data.entityType;\n    this.entity = this.data.entity;\n  }\n\n  openLink(event: MouseEvent): void {\n    this.bottomSheetRef.dismiss();\n    event.preventDefault();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Annotation } from '@app/models/annotation.model'\nimport { Subject } from 'rxjs';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { environment } from \"@env/environment\";\n\n\n\ninterface Query {\n  documentId:string,\n  page: number,\n}\n\ninterface Filter {\n  creatorName: string,\n  editorName: string,\n  documentId: string,\n  page: number,\n  parent: string,\n};\n\ninterface QueryObject {\n  keywords: string,\n  entityType: string,\n  entityId:string,\n  filter: Filter,\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotationsService {\n  // All annotations in the entity or document\n  private annList : Annotation[]=[];\n  private totalAnns: number;\n  public annListUpdated = new Subject<{\n    annotations: Annotation[],\n    getMethod: string}>();\n\n  private branch: Annotation[]=[];\n  public branchUpdated = new Subject<Annotation[]>();\n\n\n  public displayContext = new Subject<number>();\n\n  private apiUrl = environment.apiUrl + \"/annotations/\"\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n\n\n  getAnnotations(query: Query){\n    let params = new HttpParams()\n    .set(\"documentId\", query.documentId)\n    .set(\"page\", query.page.toString())\n\n    this.http.get<{annotations: Annotation[], totalAnns:number}>(\n      this.apiUrl + 'getAnnotations', {params: params}\n    ).subscribe(\n      res => {\n        this.annList = res.annotations;\n        this.totalAnns = res.totalAnns;\n        this.annListUpdated.next({\n          annotations: [...this.annList],\n          getMethod: 'regular'\n        });\n      }\n    );\n  }\n\n  \n\n  searchAnnotations(queryObject: QueryObject){\n    let params = new HttpParams()\n    .set(\"keywords\", queryObject.keywords)\n    .set(\"entityType\", queryObject.entityType)\n    .set(\"entityId\", queryObject.entityId);\n\n    this.http.get<{annotations: Annotation[], totalAnns:number}>(\n      this.apiUrl + 'searchAnnotations', {params: params}\n    ).subscribe(\n      res => {\n        this.annList = res.annotations;\n        const filter = queryObject.filter;\n        Object.keys(filter).forEach(\n          key => {\n            if(filter[key]!== null){\n              this.annList = this.annList.filter(\n                item => item[key] == filter[key]\n              );\n            }\n          }\n        )\n\n        this.totalAnns = res.totalAnns;\n        this.annListUpdated.next({\n          annotations: [...this.annList],\n          getMethod: \"search\"\n        });\n      }\n    );\n  }\n\n  setBranch(parent: string){\n    const params = new HttpParams()\n    .set(\"parent\", parent);\n\n    this.http.get<{branch: Annotation[]}>\n    (this.apiUrl + \"setBranch\", {params: params}).subscribe(\n      res => {\n        this.branch = res.branch;\n\n        console.log(\"current branch\", parent, this.branch);\n        this.branchUpdated.next([...this.branch]);\n      }\n    );\n  }\n\n  createAnnotation(annotation: Annotation){\n\n    this.http.post<{_id:string, creatorName: string, docTitle: string}>(\n      this.apiUrl + 'createAnnotation', annotation\n    ).subscribe(\n      res => {\n        annotation._id = res. _id;\n        annotation.creatorName = res.creatorName;\n        annotation.docTitle = res.docTitle;\n\n\n        //if it is a reply\n        if(annotation.parent!=\"root\"){\n          //if the annotation is a reply to the current node\n          if(annotation.parent === this.branch[0]._id){\n            this.branch[0].children.push(annotation._id);\n            this.branch.push(annotation);\n            this.branchUpdated.next([...this.branch])\n\n          }else {\n            // it is the reply to a child node of current\n            // branch\n            let idx: number;\n            for(let ann of this.branch){\n              if(ann._id === annotation.parent){\n                idx = this.branch.indexOf(ann);\n                break;\n              }\n            }\n\n            this.branch[idx].children.push(annotation._id);\n            this.branchUpdated.next([...this.branch]);\n          }\n\n        }else{\n          this.annList.push(annotation);\n        }\n        //this.annList.push(annotation);\n        this.annListUpdated.next({\n          annotations: [...this.annList],\n          getMethod: 'regular'\n        })\n\n      }\n    );\n  }\n\n  updateAnnotation(\n    annotation: Annotation,\n    annListIdx: number,\n    branchIdx: number){\n    this.http.put<{message: string}>(\n      this.apiUrl + 'updateAnnotation', annotation\n    ).subscribe(\n      res => {\n        annotation.lastEditTime = Date.now();\n        annotation.editorName = localStorage.getItem(\"userName\");\n        this.branch[branchIdx] = annotation;\n        this.branchUpdated.next([...this.branch]);\n      }\n    )\n  }\n\n  deleteAnnotation(annotation:Annotation, parentIndex:number){\n    // deletion can happen only in a branch\n\n    const params = new HttpParams()\n    .set(\"_id\", annotation._id)\n    .set(\"parent\", annotation.parent);\n\n    this.http.delete<{message:string}>(\n      this.apiUrl + 'deleteAnnotation', {params: params}\n    ).subscribe(\n      res => {\n        this.annList = this.annList.filter(\n          ann => ann._id != annotation._id\n        );\n\n        // if deleted ann has a parent\n        // splice this id from parent.children\n\n\n        if(this.branch[0]._id == annotation._id){\n          this.branch = [];\n        } else{\n          // update branchNode children\n          this.branch[0].children = this.branch[0].\n          children.filter(\n            _id => _id!=annotation._id\n          )\n          this.branch = this.branch.filter(\n            child => child._id != annotation._id\n          );\n        }\n\n        //this.annListUpdated.next([...this.annList]);\n\n        this.branchUpdated.next([...this.branch]);\n      }\n    );\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n//import { LitsComponent } from './personal/lits/lits.component';\n//import { LitOpenComponent } from './personal/lits/lit-open/lit-open.component';\nimport { SignupComponent } from './auth/signup/signup.component';\nimport { LoginComponent } from './auth/login/login.component';\nimport { ProfileComponent } from './profile/profile.component';\nimport { AuthGuard } from './auth/auth-guard';\n\nimport { MyLibraryComponent } from \"@app/my-library/my-library.component\";\n\nimport { EntitiesComponent } from \"@app/entities/entities.component\";\nimport { EntityDetailComponent } from\n\"@app/entity-detail/entity-detail.component\";\n\nimport { DocDisplayComponent } from\n'@app/doc-display/doc-display.component'\n\nimport { SupportFeedbackComponent } from \"@app/support-feedback/support-feedback.component\";\n\nconst appRoutes: Routes = [\n  { path: '', component: LoginComponent },\n  {\n    path: \"profile\", component: ProfileComponent,\n    canActivate: [AuthGuard]\n  },\n\n  {\n    path: 'my-library', component: EntityDetailComponent,\n    canActivate: [AuthGuard]\n  },\n  {\n    path: 'entity/:entityType',\n    component: EntitiesComponent,\n    canActivate: [AuthGuard]\n  },\n\n  {\n    path: 'entity/:entityType/:entityName/:entityId',\n    component: EntityDetailComponent,\n    canActivate: [AuthGuard]\n  },\n  {\n    path: 'login', component: LoginComponent,\n  },\n  {\n    path: 'entity/join/:entityType/:entityName/:entityId',\n    component: LoginComponent\n  },\n  {\n    path: 'signup', component: SignupComponent,\n  },\n  {\n    path: 'support-feedbacks', component: SupportFeedbackComponent,\n  }\n\n]\n\n\n@NgModule({\n  imports: [RouterModule.forRoot(appRoutes)],\n  exports: [RouterModule],\n  providers: [AuthGuard]\n})\n\nexport class AppRoutingModule {}\n","module.exports = \"app-footer {\\n  width:100%;\\n  margin-bottom:0px;\\n\\n}\\n\\n.page-wrap {\\n  display:flex;\\n  flex-direction:column;\\n  min-height:100vh;\\n}\\n\\n.content {\\n  flex:1;\\n}\\n\\nmain {\\n  display:flex;\\n  flex-direction:column;\\n  > *:not(router-outlet){\\n    flex:1;\\n    display:block;\\n  }\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCOztDQUVuQjs7QUFFRDtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsaUJBQWlCO0NBQ2xCOztBQUVEO0VBQ0UsT0FBTztDQUNSOztBQUVEO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QjtJQUNFLE9BQU87SUFDUCxjQUFjO0dBQ2Y7Q0FDRiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYXBwLWZvb3RlciB7XG4gIHdpZHRoOjEwMCU7XG4gIG1hcmdpbi1ib3R0b206MHB4O1xuXG59XG5cbi5wYWdlLXdyYXAge1xuICBkaXNwbGF5OmZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjtcbiAgbWluLWhlaWdodDoxMDB2aDtcbn1cblxuLmNvbnRlbnQge1xuICBmbGV4OjE7XG59XG5cbm1haW4ge1xuICBkaXNwbGF5OmZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjtcbiAgPiAqOm5vdChyb3V0ZXItb3V0bGV0KXtcbiAgICBmbGV4OjE7XG4gICAgZGlzcGxheTpibG9jaztcbiAgfVxufVxuIl19 */\"","module.exports = \"<app-header></app-header>\\n\\n<main class=\\\"content\\\">\\n<router-outlet></router-outlet>\\n</main>\\n\\n<!--app-footer></app-footer-->\\n\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from \"./auth/auth.service\";\n\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  title = 'app';\n\n  constructor(private authService: AuthService){}\n\n  ngOnInit(){\n    \n    this.authService.autoAuthUser();\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { AppComponent } from './app.component';\n\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from  '@angular/common/http';\nimport {\n  MatInputModule,\n  MatCardModule,\n  MatButtonModule,\n  MatToolbarModule,\n  MatExpansionModule,\n  MatProgressSpinnerModule,\n  MatMenuModule,\n  MatListModule,\n  MatTabsModule,\n  MatPaginatorModule,\n  MatStepperModule,\n  MatButtonToggleModule,\n  MatBottomSheetModule,\n  MatChipsModule,\n  MatSlideToggleModule,\n  MatIconModule,\n  MatTooltipModule,\n  MatSidenavModule,\n  MatBadgeModule,\n  MatRadioModule,\n} from '@angular/material';\n\nimport { HeaderComponent } from './header/header.component';\nimport { SignupComponent } from './auth/signup/signup.component';\nimport { LoginComponent } from './auth/login/login.component';\nimport { ProfileComponent } from './profile/profile.component';\nimport { AuthInterceptor } from \"./auth/auth-interceptor\";\n\nimport { AppRoutingModule } from './app-routing.module';\n\nimport { MathJaxDirective } from \"./directives/mathjax.directive\";\nimport { FooterComponent } from './footer/footer.component';\nimport { MyLibraryComponent } from './my-library/my-library.component';\n\nimport { ShortenPipe } from './pipes/shorten.pipe';\nimport { HighlightKeywordsPipe } from './pipes/highlight-keywords.pipe';\nimport { EntitiesComponent } from './entities/entities.component';\nimport { EntityDetailComponent,\nAnnotationsSearchTipsBottomSheet } from \"./entity-detail/entity-detail.component\";\n\nimport {\n  DocDisplayComponent,\n//  DocsInEntityBottomSheet,\n//  DocumentAlertBottomSheet\n} from \"./doc-display/doc-display.component\";\n\nimport { AnnotationsComponent,\nAnnotationsComponentTipsBottomSheet } from \"./annotations/annotations.component\";\nimport { HighlightDirective } from './directives/highlight.directive';\n\nimport 'hammerjs';\nimport { GetPositionDirective } from './directives/get-position.directive';\nimport { TutorialsComponent } from './tutorials/tutorials.component';\nimport { AutoSetRowsDirective } from './directives/auto-set-rows.directive';\nimport { SupportFeedbackComponent } from './support-feedback/support-feedback.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    HeaderComponent,\n    SignupComponent,\n    LoginComponent,\n    ProfileComponent,\n    MathJaxDirective,\n    FooterComponent,\n    MyLibraryComponent,\n    ShortenPipe,\n    HighlightKeywordsPipe,\n    EntitiesComponent,\n    EntityDetailComponent,\n    DocDisplayComponent,\n    //DocsInEntityBottomSheet,\n    //DocumentAlertBottomSheet,\n    AnnotationsComponent,\n    HighlightDirective,\n    GetPositionDirective,\n    TutorialsComponent,\n    AnnotationsSearchTipsBottomSheet,\n    AnnotationsComponentTipsBottomSheet,\n    AutoSetRowsDirective,\n    SupportFeedbackComponent,\n\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    MatInputModule,\n    MatCardModule,\n    MatButtonModule,\n    MatToolbarModule,\n    MatExpansionModule,\n    MatProgressSpinnerModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatSidenavModule,\n    MatMenuModule,\n    MatTabsModule,\n    MatPaginatorModule,\n    MatStepperModule,\n    MatButtonToggleModule,\n    MatBottomSheetModule,\n    MatChipsModule,\n    MatSlideToggleModule,\n    MatListModule,\n    MatBadgeModule,\n    MatRadioModule,\n  ],\n  providers: [\n    {provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi:true}\n  ],\n  entryComponents:[\n    AnnotationsSearchTipsBottomSheet,\n    AnnotationsComponentTipsBottomSheet\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import {\n  CanActivate,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  Router\n} from \"@angular/router\";\nimport { Injectable } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\n\nimport { AuthService } from \"./auth.service\";\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(private authService: AuthService, private router: Router){}\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): boolean | Observable<boolean> | Promise<boolean> {\n    const isAuth = this.authService.getIsAuth();\n    if(!isAuth){\n      this.router.navigate(['/login']);\n    }\n    return isAuth;\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { HttpInterceptor, HttpRequest, HttpHandler } from \"@angular/common/http\";\nimport { AuthService } from \"./auth.service\";\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  constructor(private authService: AuthService){}\n\n  intercept(req: HttpRequest<any>, next: HttpHandler){\n    const authToken = this.authService.getToken();\n    const authRequest = req.clone({\n      headers: req.headers.set(\"Authorization\", \"Bearer \" + authToken)\n    });\n    return next.handle(authRequest);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { HttpClient, HttpParams } from \"@angular/common/http\";\nimport { Router } from \"@angular/router\";\nimport { Subject } from \"rxjs\";\n\nimport { AuthData } from \"./auth-data.model\";\nimport { UserData } from \"./user-data.model\";\nimport { environment } from \"../../environments/environment\";\n\n@Injectable({ providedIn: \"root\" })\nexport class AuthService {\n  private isAuthenticated = false;\n  private token: string;\n\n  private tokenTimer: any;\n  private tokenRenewer: any;\n\n  public authStatus = new Subject<boolean>();\n\n  private authData:object;\n\n  private apiUrl = environment.apiUrl + \"/\" + \"user\";\n  constructor(private http: HttpClient, private router: Router) {}\n\n\n\n  getUserName(){\n    return localStorage.getItem(\"userName\");\n  }\n\n  getToken() {\n    this.token = localStorage.getItem(\"token\");\n    return this.token;\n  }\n\n  getIsAuth() {\n    return this.isAuthenticated;\n  }\n\n  checkUserNameAndEmail(userName:string, email:string){\n    const params = new HttpParams()\n    .set(\"userName\", userName)\n    .set(\"email\", email)\n\n    return this.http.get<{message:string}>(\n      this.apiUrl + \"/checkUserNameAndEmail\", {params: params}\n    );\n  }\n\n  createUser(userData: UserData){\n    return this.http.post<{message:string}>\n    (this.apiUrl + \"/signup\", userData)\n  }\n\n  login(identity: string, password: string) {\n    const authData = {\n      identity: identity,\n      password: password,\n    };\n\n    this.http\n      .post<{token: string; expiresIn: number; userName:string }>(\n        this.apiUrl + \"/login\",\n        authData\n      )\n      .subscribe(\n        response => {\n\n        const token = response.token;\n        this.token = token;\n        this.setUserName(response.userName);\n\n        const expiresInDuration = response.expiresIn;\n        this.setAuthTimer(expiresInDuration);\n        this.autoRenewToken(expiresInDuration);\n\n        this.isAuthenticated = true;\n\n        this.authStatus.next(true);\n        const now = new Date();\n        const expirationDate = new Date(now.getTime() + expiresInDuration * 1000);\n\n        this.saveAuthData(token, expirationDate);\n\n      },\n      // handle the error in the second argument of subscribe\n      error => {\n        this.authStatus.next(false);\n      });\n  }\n\n  loginToJoinEntity(identity: string, password:string,\n    entityType:string, entityName:string, entityId:string){\n\n    const authData = {\n      identity: identity,\n      password: password,\n      entityType: entityType,\n      entityId:entityId\n    };\n\n    this.http\n      .post<{token: string; expiresIn: number; userName:string }>(\n        this.apiUrl + \"/loginToJoinEntity\",\n        authData\n      )\n      .subscribe(\n        response => {\n\n        const token = response.token;\n        this.token = token;\n        this.setUserName(response.userName);\n        const expiresInDuration = response.expiresIn;\n        this.setAuthTimer(expiresInDuration);\n        this.autoRenewToken(expiresInDuration);\n\n        this.isAuthenticated = true;\n\n        this.authStatus.next(true);\n        const now = new Date();\n        const expirationDate = new Date(now.getTime() + expiresInDuration * 1000);\n        this.saveAuthData(token, expirationDate);\n\n      },\n      // handle the error in the second argument of subscribe\n      error => {\n        console.log(error);\n        this.authStatus.next(false);\n      });\n    }\n\n  setUserName(userName:string){\n    localStorage.setItem(\"userName\", userName);\n  }\n\n  //fetch userInfo to update\n  fetchUserInfo(){\n    const params = new HttpParams()\n    .set(\"userName\", this.getUserName())\n    return this.http.get<{\n      firstName:string,\n      lastName:string,\n      userName:string,\n      email:string,\n      affiliation:string}>(\n      this.apiUrl + \"/fetchUserInfo\", { params }\n    );\n  }\n\n\n  updateOneUser(updatedInfo: any){\n    return this.http.put(this.apiUrl, updatedInfo);\n  }\n\n  // authenticate the user automatically up on the start of the app\n  autoAuthUser() {\n    const authInformation = this.getAuthData();\n    if (!authInformation) {\n      return;\n    }\n    const now = new Date();\n    const expiresIn = authInformation.expirationDate.getTime() - now.getTime();\n    if (expiresIn > 0) {\n      this.token = authInformation.token;\n      this.isAuthenticated = true;\n      this.setAuthTimer(expiresIn / 1000);\n      this.authStatus.next(true);\n    }\n  }\n\n  logout() {\n    this.token = null;\n    this.isAuthenticated = false;\n    this.authStatus.next(false);\n\n    clearTimeout(this.tokenTimer);\n    clearInterval(this.tokenRenewer);\n\n    this.clearAuthData();\n    this.router.navigate([\"/\"]);\n  }\n\n  checkUserExist(userName:string){\n    let params = new HttpParams()\n    .set(\"userName\", userName);\n    return this.http.get(this.apiUrl, { params });\n  }\n\n\n\n  passwordReset(userEmail){\n    let params = new HttpParams()\n    .set(\"email\", userEmail);\n    return this.http.get<{message:string}>(\n      this.apiUrl + \"/passwordReset/forgotPassword\", { params });\n  }\n\n  updatePassword(currentPassword:string, newPassword:string){\n    const passData = {\n      \"userName\": this.getUserName(),\n      \"currentPassword\": currentPassword,\n      \"newPassword\": newPassword,\n    };\n    return this.http.put<{message:string}>(\n      this.apiUrl + \"/updatePassword\", { passData });\n  }\n\n  private setAuthTimer(duration: number) {\n    console.log(\"Setting timer: \" + duration);\n    this.tokenTimer = setTimeout(() => {\n      this.logout();\n    }, duration * 1000);\n  }\n\n  private autoRenewToken(duration: number){\n    console.log(\"Renewing token:\" + duration);\n    this.tokenRenewer = setInterval(()=> {\n      //run every 58 mins\n      if(this.isAuthenticated){\n        this.renewToken();\n      }\n    }, (duration - 120) * 1000 );\n  }\n\n  private renewToken(){\n    this.http.get<{token:string, expiresIn:number}>\n    (this.apiUrl + \"/renewToken\").subscribe(\n      res => {\n        const token = res.token;\n        this.token = token;\n        const expiresInDuration = res.expiresIn; // in sec\n        this.setAuthTimer(expiresInDuration);\n        this.isAuthenticated = true;\n        this.authStatus.next(true);\n        const now = new Date();\n        const expirationDate = new Date(now.getTime() + expiresInDuration * 1000);\n        this.saveAuthData(token, expirationDate);\n      }\n    )\n  }\n\n  private saveAuthData(token: string, expirationDate: Date) {\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"expiration\", expirationDate.toISOString());\n  }\n\n  private clearAuthData() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"expiration\");\n    localStorage.removeItem(\"userName\");\n  }\n\n  private getAuthData() {\n    const token = localStorage.getItem(\"token\");\n    const expirationDate = localStorage.getItem(\"expiration\");\n    if (!token || !expirationDate) {\n      return;\n    }\n    return {\n      token: token,\n      expirationDate: new Date(expirationDate)\n    }\n  }\n}\n","module.exports = \".main {\\n\\n}\\n\\n#title {\\n  left: 50%;\\n  top:20%;\\n  position: fixed;\\n  margin-left: -160px;\\n}\\n\\n.signin {\\n  margin: auto;\\n}\\n\\n.signin #signinForm {\\n  width:300px;\\n  margin:auto;\\n  margin-top:200px;\\n}\\n\\n.signup div {\\n  width: 300px;\\n  margin:auto;\\n  margin-top:50px;\\n}\\n\\nmat-form-field {\\n  width: 100%;\\n}\\n\\nmat-spinner {\\n  margin: auto;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDOztBQUVEO0VBQ0UsVUFBVTtFQUNWLFFBQVE7RUFDUixnQkFBZ0I7RUFDaEIsb0JBQW9CO0NBQ3JCOztBQUdEO0VBQ0UsYUFBYTtDQUNkOztBQUVEO0VBQ0UsWUFBWTtFQUNaLFlBQVk7RUFDWixpQkFBaUI7Q0FDbEI7O0FBR0Q7RUFDRSxhQUFhO0VBQ2IsWUFBWTtFQUNaLGdCQUFnQjtDQUNqQjs7QUFFRDtFQUNFLFlBQVk7Q0FDYjs7QUFDRDtFQUNFLGFBQWE7Q0FDZCIsImZpbGUiOiJzcmMvYXBwL2F1dGgvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYWluIHtcblxufVxuXG4jdGl0bGUge1xuICBsZWZ0OiA1MCU7XG4gIHRvcDoyMCU7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbWFyZ2luLWxlZnQ6IC0xNjBweDtcbn1cblxuXG4uc2lnbmluIHtcbiAgbWFyZ2luOiBhdXRvO1xufVxuXG4uc2lnbmluICNzaWduaW5Gb3JtIHtcbiAgd2lkdGg6MzAwcHg7XG4gIG1hcmdpbjphdXRvO1xuICBtYXJnaW4tdG9wOjIwMHB4O1xufVxuXG5cbi5zaWdudXAgZGl2IHtcbiAgd2lkdGg6IDMwMHB4O1xuICBtYXJnaW46YXV0bztcbiAgbWFyZ2luLXRvcDo1MHB4O1xufVxuXG5tYXQtZm9ybS1maWVsZCB7XG4gIHdpZHRoOiAxMDAlO1xufVxubWF0LXNwaW5uZXIge1xuICBtYXJnaW46IGF1dG87XG59XG4iXX0= */\"","module.exports = \"<div class=\\\"main\\\">\\n\\n  <div class=\\\"signin\\\">\\n    <h1 *ngIf=\\\"!this.entityId\\\" id=\\\"title\\\">\\n      Sign in to Interpolate\\n    </h1>\\n\\n    <h1 id=\\\"title\\\" *ngIf=\\\"this.entityId\\\">\\n      Sign in to join the {{ entity }} {{ entityName }}\\n    </h1>\\n\\n    <div id=\\\"signinForm\\\">\\n      <form [formGroup]=\\\"loginForm\\\" (submit)=\\\"onLogin()\\\">\\n        <mat-form-field>\\n          <input matInput formControlName=\\\"identity\\\" placeholder=\\\"Username or email\\\">\\n          <mat-error *ngIf=\\\"loginForm.get('identity').invalid\\\">\\n            Please enter a valid email or username.\\n          </mat-error>\\n        </mat-form-field>\\n\\n        <mat-form-field>\\n          <input type=\\\"password\\\" formControlName=\\\"password\\\" matInput placeholder=\\\"Password\\\">\\n          <mat-error *ngIf=\\\"loginForm.get('password').invalid\\\">\\n            Please enter a valid password.\\n          </mat-error>\\n        </mat-form-field>\\n      </form>\\n\\n      <div>\\n        <button mat-stroked-button color=\\\"primary\\\"\\n        (click)=\\\"onLogin()\\\">Login</button>\\n\\n        <button mat-stroked-button color=\\\"primary\\\"\\n        style=\\\"float:right\\\"\\n        (click)=\\\"showPsdReset=!showPsdReset\\\">\\n        Forgot password?\\n        </button>\\n      </div>\\n\\n      <p>{{ loginFailureMessage }}</p>\\n\\n      <div *ngIf=\\\"showPsdReset\\\">\\n\\n        <mat-form-field *ngIf=\\\"showPsdReset\\\">\\n          <input matInput type=\\\"email\\\" (keydown.enter)=\\\"resetPassword($event)\\\"\\n          placeholder=\\\"Please enter your email and hit enter\\\">\\n        </mat-form-field>\\n\\n\\n        <p *ngIf=\\\"message\\\" class=\\\"text text-info\\\">\\n          {{ message }}\\n        </p>\\n        <!--p> A password reset form has been sent to your email </p-->\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"signup\\\">\\n    <div>\\n      <button mat-button color=\\\"primary\\\"\\n      (click)=\\\"navigateToSignUp()\\\">\\n        New to Interpolate?\\n      </button>\\n    </div>\\n  </div>\\n\\n\\n\\n\\n\\n\\n\\n\\n</div>\\n\"","import { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute, ParamMap } from \"@angular/router\";\nimport { AuthService } from \"../auth.service\";\nimport { Subscription } from \"rxjs\";\n\n@Component({\n  templateUrl: \"./login.component.html\",\n  styleUrls: [\"./login.component.css\"]\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  public isLoading = false;\n\n  public loginFailureMessage : string = \"\";\n\n  private authListenerSubs: Subscription;\n  private pwdResetSent : boolean = false;\n\n\n  public message:string;\n\n  public showPsdReset:boolean=false;\n\n  // login to join an entity\n  public entityType:string;\n  public entity:string;\n  public entityName:string;\n  public entityId:string = null;\n\n\n  public loginForm: FormGroup;\n\n\n  constructor(\n    public authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router) {}\n\n  ngOnInit(){\n\n    this.authListenerSubs = this.authService.authStatus\n    .subscribe(\n      isAuthenticated => {\n        console.log(isAuthenticated);\n\n        if(isAuthenticated == false){\n          this.loginFailureMessage =\n          \"Login failed, either email or password is invalid\";\n        }else{\n          console.log(this.entityType);\n\n          if(this.entityType!=\"my-library\"){\n\n            this.router.navigate([\"entity\", this.entityType, this.entityName, this.entityId]);\n\n          }else{\n\n            this.router.navigate([\"my-library\"]);\n\n          }\n\n        }\n      }\n    );\n\n\n    this.loginForm = new FormGroup({\n      identity: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n\n      password: new FormControl(null, {\n        validators: [Validators.required]\n      })\n    })\n\n    this.route.paramMap.subscribe(\n      (paramMap: ParamMap) => {\n        this.entityType = paramMap.get(\"entityType\");\n        this.entityName = paramMap.get(\"entityName\");\n        this.entityId = paramMap.get(\"entityId\");\n\n        if(!this.entityType){\n          this.entityType = \"my-library\";\n        }\n\n      }\n    );\n\n  }\n\n  onLogin() {\n\n\n    if(this.entityId){\n      this.authService.loginToJoinEntity(\n        this.loginForm.value.identity,\n        this.loginForm.value.password,\n        this.entityType,\n        this.entityName,\n        this.entityId\n      );\n\n    }else{\n      this.authService.login(\n        this.loginForm.value.identity,\n        this.loginForm.value.password,\n      );\n    }\n\n  }\n\n\n\n\n  navigateToSignUp(){\n    this.router.navigate([\"/signup\"]);\n  }\n\n  resetPassword(event: Event){\n    const userEmail = (<HTMLInputElement>event.target).value;\n\n    this.authService.passwordReset(userEmail).subscribe(\n      res => {\n        this.message = res.message;\n      },\n\n      error=>{\n        this.message = error.error.message;\n        console.log(\"error resetting\", error.error.message);\n      }\n    );\n    (<HTMLInputElement>event.target).value = \"\";\n  }\n\n  ngOnDestroy(){\n    //this.authListenerSubs.unsubscribe();\n  }\n}\n","module.exports = \".main {\\n  width:100%;\\n  height: 50%;\\n}\\n\\n.intro {\\n  width: 60%;\\n  float: left;\\n  margin-left: 5%;\\n}\\n\\nh3 {\\n  width: 80%;\\n}\\n\\n.users-specific-info {\\n  width: 60%;\\n}\\n\\n#signup {\\n  margin-top: 2%;\\n  width: 25%;\\n  float:right;\\n  margin-right:5%;\\n}\\n\\nmat-form-field {\\n  width: 100%;\\n}\\n\\nmat-spinner {\\n  margin: auto;\\n}\\n\\n#duplicated {\\n  background-color: #FAEA03;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9zaWdudXAvc2lnbnVwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtDQUNiOztBQUVEO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixnQkFBZ0I7Q0FDakI7O0FBQUM7RUFDQSxXQUFXO0NBQ1o7O0FBRUQ7RUFDRSxXQUFXO0NBQ1o7O0FBRUQ7RUFDRSxlQUFlO0VBQ2YsV0FBVztFQUNYLFlBQVk7RUFDWixnQkFBZ0I7Q0FDakI7O0FBRUQ7RUFDRSxZQUFZO0NBQ2I7O0FBRUQ7RUFDRSxhQUFhO0NBQ2Q7O0FBRUQ7RUFDRSwwQkFBMEI7Q0FDM0IiLCJmaWxlIjoic3JjL2FwcC9hdXRoL3NpZ251cC9zaWdudXAuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYWluIHtcbiAgd2lkdGg6MTAwJTtcbiAgaGVpZ2h0OiA1MCU7XG59XG5cbi5pbnRybyB7XG4gIHdpZHRoOiA2MCU7XG4gIGZsb2F0OiBsZWZ0O1xuICBtYXJnaW4tbGVmdDogNSU7XG59IGgzIHtcbiAgd2lkdGg6IDgwJTtcbn1cblxuLnVzZXJzLXNwZWNpZmljLWluZm8ge1xuICB3aWR0aDogNjAlO1xufVxuXG4jc2lnbnVwIHtcbiAgbWFyZ2luLXRvcDogMiU7XG4gIHdpZHRoOiAyNSU7XG4gIGZsb2F0OnJpZ2h0O1xuICBtYXJnaW4tcmlnaHQ6NSU7XG59XG5cbm1hdC1mb3JtLWZpZWxkIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbm1hdC1zcGlubmVyIHtcbiAgbWFyZ2luOiBhdXRvO1xufVxuXG4jZHVwbGljYXRlZCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGQUVBMDM7XG59XG4iXX0= */\"","module.exports = \"<div class=\\\"main\\\">\\n  <div class=\\\"intro\\\">\\n\\n    <h1 class=\\\"text-info\\\">\\n      Interpolate is a platform for sharing annotations on PDF\\n      documents\\n    </h1>\\n\\n    <h3>\\n      Interpolate is much more than a platform for\\n      creating sticky-note-annotations\\n      and sharing it with other people. We designed Interpolate\\n      as a Q & A platform, where users can directly post questions inside\\n      the documents in the form of annotations.\\n      This means you can:\\n    </h3>\\n\\n    <ul>\\n      <li>\\n        <h3>\\n          Reply to annotations that are shared with you;\\n        </h3>\\n\\n      </li>\\n      <li>\\n        <h3>\\n          Have a nested-discussion;\\n        </h3>\\n      </li>\\n      <li>\\n        <h3>\\n        Easily navigate to an annotation through our search engine.\\n        </h3>\\n      </li>\\n    </ul>\\n\\n    <h3>\\n      As we grow our platform, we will add more features based on\\n      users' feedback.\\n    </h3>\\n\\n    <div class=\\\"users-specific-info\\\">\\n\\n    <h2 class=\\\"text-info\\\">\\n      You will find Interpolate helpful, if you are a\\n    </h2>\\n\\n\\n    <ul>\\n      <li>\\n        <h3>\\n          Researcher\\n        </h3>\\n\\n      </li>\\n      <li>\\n        <h3>\\n          Instructor\\n        </h3>\\n      </li>\\n      <li>\\n        <h3>\\n          Student\\n        </h3>\\n      </li>\\n    </ul>\\n    \\n    </div>\\n\\n\\n  </div>\\n  <div id=\\\"signup\\\">\\n    <!--mat-spinner *ngIf=\\\"isLoading\\\"></mat-spinner-->\\n    <form  [formGroup]=\\\"form\\\" (submit)=\\\"onSignup()\\\">\\n      <mat-form-field>\\n        <input matInput formControlName=\\\"firstName\\\" type=\\\"text\\\" placeholder=\\\"First Name\\\">\\n        <mat-error *ngIf=\\\"form.get('firstName').invalid\\\">Please enter a valid first name.</mat-error>\\n      </mat-form-field>\\n      <mat-form-field>\\n        <input matInput formControlName=\\\"lastName\\\"  type=\\\"text\\\" placeholder=\\\"Last Name\\\">\\n        <mat-error *ngIf=\\\"form.get('lastName').invalid\\\">Please enter a valid last name.</mat-error>\\n      </mat-form-field>\\n      <mat-form-field>\\n        <input matInput formControlName=\\\"userName\\\" type=\\\"text\\\" placeholder=\\\"User Name\\\">\\n        <mat-error *ngIf=\\\"form.get('userName').invalid\\\">Please enter a valid user name</mat-error>\\n      </mat-form-field>\\n      <mat-form-field>\\n        <input matInput formControlName=\\\"email\\\" type=\\\"email\\\" placeholder=\\\"E-Mail\\\">\\n        <mat-error *ngIf=\\\"form.get('email').invalid\\\">Please enter a valid email.</mat-error>\\n      </mat-form-field>\\n      <mat-form-field>\\n        <input matInput type=\\\"password\\\" formControlName=\\\"password\\\" placeholder=\\\"Password\\\">\\n        <mat-error *ngIf=\\\"form.get('password').invalid\\\">\\n          A valid password must have at least six characters</mat-error>\\n      </mat-form-field>\\n\\n      <mat-form-field>\\n        <input matInput type=\\\"text\\\" formControlName=\\\"affiliation\\\"\\n        placeholder=\\\"Please enter your institute\\\">\\n        <mat-error *ngIf=\\\"form.get('affiliation').invalid\\\">\\n          Please enter your institute</mat-error>\\n      </mat-form-field>\\n\\n      <button mat-flat-button color=\\\"primary\\\" type=\\\"submit\\\">Signup</button>\\n      <p class=\\\"text text-info\\\" *ngIf=\\\"errorMessage\\\">\\n        {{ errorMessage }}\\n      </p>\\n    </form>\\n  </div>\\n</div>\\n\"","import { Component, OnInit } from \"@angular/core\";\nimport { NgForm } from \"@angular/forms\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { AuthService } from \"../auth.service\";\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { MiscService } from \"@app/helpers/misc.service\";\nimport { environment } from \"@env/environment\";\nimport { UserData } from \"@app/auth/user-data.model\";\n\n@Component({\n  templateUrl: \"./signup.component.html\",\n  styleUrls: [\"./signup.component.css\"]\n})\nexport class SignupComponent implements OnInit {\n  private isLoading = false;\n  public errorMessage: string;\n  public form: FormGroup;\n\n\n\n  private invitedSignUp:boolean = false;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit(){\n    this.form = new FormGroup({\n      firstName: new FormControl(null, {validators: [Validators.required]}),\n      lastName: new FormControl(null, {validators: [Validators.required]}),\n      userName: new FormControl(null, {validators: [Validators.required]}),\n      email: new FormControl(null, {validators: [Validators.required, Validators.email]}),\n      password: new FormControl(null, {validators: [Validators.required,\n        Validators.minLength(environment.passwordMinLength)]}),\n      affiliation: new FormControl(null, {validators: [Validators.required]}),\n      //researchInterests: new FormControl(null, {validators: [Validators.required]}),\n    });\n\n  }\n\n  loginToJoin(){\n    const groupId = this.route.snapshot.params.groupId;\n    if(groupId){\n      this.router.navigate([\"login/\", groupId]);\n    }else{\n      this.router.navigate([\"login\"]);\n    }\n\n  }\n\n  onSignup() {\n    if(this.form.invalid){\n      return;\n    }\n\n    // create user Object\n    const userData : UserData = {\n      _id: null,\n      firstName: this.form.value.firstName,\n      lastName: this.form.value.lastName,\n      userName: this.form.value.userName,\n      email: this.form.value.email,\n      password: this.form.value.password,\n      affiliation: this.form.value.affiliation,\n    };\n\n    this.authService.checkUserNameAndEmail(\n      this.form.value.userName,\n      this.form.value.email\n    ).subscribe(\n      res => {\n\n        if(res.message == \"available\"){\n          this.authService.createUser(userData)\n          .subscribe(\n            res => {\n              this.authService.login(\n                this.form.value.userName,\n                this.form.value.password\n              )\n              this.form.reset();\n\n            });\n        }else {\n          this.errorMessage = res.message\n        }\n\n\n      }\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from \"rxjs\";\nimport { HighlightCoord } from \"@app/models/highlightCoord\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommunicationService {\n\n  // page updated in doc-display component\n\n  public docIdAndPageUpdated = new Subject<{\n    documentId: string,\n    page: number\n  }>();\n\n\n\n  public documentIdUpdated = new Subject<string>();\n\n  public pageUpdated = new Subject<number>();\n  public inHighlightMode = new Subject<boolean>();\n\n  public showHighlight = new Subject<{\n    documentId: string,\n    page: number,\n    coords: HighlightCoord[]}>();\n\n  public clearHighlight = new Subject<boolean>();\n\n\n  public highlightsCoord : HighlightCoord[] = [];\n\n  constructor() { }\n}\n","import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[appAutoSetRows]'\n})\nexport class AutoSetRowsDirective {\n  // automatically set rows for annotation content form control\n\n  constructor(\n    private el: ElementRef\n  ) { }\n\n  ngOnInit(){\n\n    const windowHeight = window.innerHeight;\n    this.el.nativeElement.rows = Math.floor(windowHeight / 38);\n  }\n}\n","import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[appGetPosition]'\n})\nexport class GetPositionDirective {\n\n  constructor(\n    public el: ElementRef\n  ) { }\n\n  ngOnInit(){\n    var rect = this.el.nativeElement;\n    console.log(Object.keys(rect));\n  }\n\n}\n","import {\n   Directive,\n  OnInit,\n  ElementRef, HostListener, Renderer } from '@angular/core';\n\n@Directive({\n  selector: '[appHighlight]'\n})\nexport class HighlightDirective {\n\n  constructor(\n    private elRef: ElementRef,\n    private renderer: Renderer) { }\n\n  ngOnInit(){\n    console.log(\"Native element\", this.elRef)\n  }\n\n  @HostListener(\"inHighlightMode\") changeCursor(event: Event){\n    console.log(event);\n  }\n\n\n\n\n\n\n\n}\n","import { Directive, ElementRef, OnInit, Input, OnChanges } from \"@angular/core\";\nimport \"mathjax\";\n\n@Directive({\n  selector: '[mathJax]'\n})\nexport class MathJaxDirective implements OnInit, OnChanges {\n  @Input('mathJax') mathContent:string;\n\n  constructor(\n    private elementRef: ElementRef\n  ){}\n\n  ngOnChanges(){\n    this.elementRef.nativeElement.innerHTML = this.mathContent;\n    MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, this.elementRef.nativeElement]);\n  }\n\n  ngOnInit(){}\n}\n","module.exports = \"app-annotations {\\n  margin-top:2%;\\n  width:100%;\\n}\\n\\n\\niframe.pdf-display {\\n  width: 100%;\\n  height: 2000px;\\n}\\n\\n\\n.example-fill-remaining-space {\\n  /* This fills the remaining space, by using flexbox.\\n     Every toolbar row uses a flexbox row layout. */\\n  flex: 1 1 auto;\\n}\\n\\n\\n#docUpdateForm, mat-form-field{\\n  width: 500px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZG9jLWRpc3BsYXkvZG9jLWRpc3BsYXkuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7RUFDZCxXQUFXO0NBQ1o7OztBQUdEO0VBQ0UsWUFBWTtFQUNaLGVBQWU7Q0FDaEI7OztBQUNEO0VBQ0U7b0RBQ2tEO0VBQ2xELGVBQWU7Q0FDaEI7OztBQUVEO0VBQ0UsYUFBYTtDQUNkIiwiZmlsZSI6InNyYy9hcHAvZG9jLWRpc3BsYXkvZG9jLWRpc3BsYXkuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImFwcC1hbm5vdGF0aW9ucyB7XG4gIG1hcmdpbi10b3A6MiU7XG4gIHdpZHRoOjEwMCU7XG59XG5cblxuaWZyYW1lLnBkZi1kaXNwbGF5IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMjAwMHB4O1xufVxuLmV4YW1wbGUtZmlsbC1yZW1haW5pbmctc3BhY2Uge1xuICAvKiBUaGlzIGZpbGxzIHRoZSByZW1haW5pbmcgc3BhY2UsIGJ5IHVzaW5nIGZsZXhib3guXG4gICAgIEV2ZXJ5IHRvb2xiYXIgcm93IHVzZXMgYSBmbGV4Ym94IHJvdyBsYXlvdXQuICovXG4gIGZsZXg6IDEgMSBhdXRvO1xufVxuXG4jZG9jVXBkYXRlRm9ybSwgbWF0LWZvcm0tZmllbGR7XG4gIHdpZHRoOiA1MDBweDtcbn1cbiJdfQ== */\"","module.exports = \"\\n\\n<div *ngIf=\\\"mode=='viewDoc'\\\">\\n<mat-toolbar style=\\\"height: 80px\\\">\\n  <mat-chip-list *ngIf=\\\"!updatingDocInfo\\\">\\n    <mat-chip>\\n      {{ documentTitle }}\\n    </mat-chip>\\n  </mat-chip-list>\\n\\n  <!--button mat-button color=\\\"primary\\\"\\n  *ngIf=\\\"!updatingDocInfo\\\"\\n  matTooltips=\\\"update title\\\"\\n  (click)=\\\"showDocUpdateForm()\\\">\\n    <mat-icon>edit</mat-icon>\\n  </button-->\\n\\n  <form [formGroup]=\\\"docUpdateForm\\\" id=\\\"docUpdateForm\\\" *ngIf=\\\"updatingDocInfo\\\">\\n    <mat-form-field>\\n      <input matInput formControlName=\\\"title\\\"\\n        placeholder=\\\"title of the document\\\">\\n      <mat-error *ngIf=\\\"docUpdateForm.get('title').invalid\\\">\\n        Please enter the title of the document\\n      </mat-error>\\n    </mat-form-field>\\n  </form>\\n\\n  <button mat-button color=\\\"primary\\\"\\n  *ngIf=\\\"updatingDocInfo\\\"\\n  matTooltips=\\\"save update\\\"\\n  (click)=\\\"saveUpdate()\\\">\\n    <mat-icon>save</mat-icon>\\n  </button>\\n\\n  <button mat-button color=\\\"primary\\\"\\n  matTooltips=\\\"view and create annotations on this page\\\"\\n  (click)=\\\"viewAnns()\\\">\\n    View & Create Annotations\\n  </button>\\n\\n  <span class=\\\"example-fill-remaining-space\\\">\\n  </span>\\n\\n  <button mat-button color=\\\"primary\\\"\\n  matTooltips=\\\"close this document\\\"\\n  (click)=\\\"closeDoc()\\\">\\n    <mat-icon>close</mat-icon>\\n  </button>\\n\\n</mat-toolbar>\\n\\n<iframe #iframe width=\\\"100%\\\" height=\\\"2000px\\\"></iframe>\\n\\n\\n</div>\\n\\n\\n\\n<app-annotations\\n[documentTitle]=\\\"documentTitle\\\"\\n(displayFullDoc)=\\\"displayFullDoc($event)\\\"\\n[documentId]=\\\"documentId\\\"\\n[documentUrl]=\\\"documentUrl\\\"\\n[page]=\\\"annotatedPage\\\"\\n[nodeAnnotationId]=\\\"nodeAnnotationId\\\"\\n#annotationsComponent\\n*ngIf=\\\"mode=='viewAnns'\\\">\\n</app-annotations>\\n\"","// open and render the file\n\nimport { Component, OnInit, OnChanges, SimpleChanges, Input,\n  OnDestroy, Output, ViewChild, ElementRef,\nEventEmitter } from '@angular/core';\n\nimport { FormGroup, FormControl, Validators} from \"@angular/forms\";\nimport { Subscription } from \"rxjs\";\nimport { PDFDocumentProxy } from 'pdfjs-dist';\n\nimport { environment } from \"@env/environment\";\nimport { EntityDocumentsService } from\n\"@app/entity-documents/entity-documents.service\";\n\nimport { Document } from \"@app/models/document.model\";\n\n\nimport { PageEvent, MatTabChangeEvent } from '@angular/material';\n\nimport { AnnotationsService } from\n\"@app/annotations/annotations.service\"\n\nimport { AnnotationsComponent } from\n\"@app/annotations/annotations.component\"\n\n@Component({\n  selector: 'app-doc-display',\n  templateUrl: './doc-display.component.html',\n  styleUrls: ['./doc-display.component.css']\n})\nexport class DocDisplayComponent implements OnInit {\n  @ViewChild('pdfViewer')\n  private pdfViewer;\n\n  @ViewChild('iframe') iframe: ElementRef;\n\n  @Input() documentId: string = null;\n  @Input() documentUrl:string = null;\n  @Input() documentTitle: string = null;\n  @Input() mode: string = \"viewDoc\";\n  @Input() annotatedPage:number = 1;\n\n  @Input() nodeAnnotationId:string;\n\n  @Output() onChangeMode: EventEmitter<string> = new EventEmitter;\n\n\n  private sub: Subscription;\n\n  public updatingDocInfo:boolean = false;\n\n  public docUpdateForm: FormGroup;\n\n\n  constructor(\n    private docsService: EntityDocumentsService,\n    private annotationsService: AnnotationsService,\n  ) { }\n\n  ngOnChanges(changes: SimpleChanges){\n    if(this.mode==\"viewDoc\"){\n      this._loadPdf();\n    }\n  }\n\n  ngOnInit() {\n    if(this.mode==\"viewAnns\"){\n      console.log(\"Annotation mode\", this.annotatedPage)\n    }\n\n    if(this.nodeAnnotationId){\n      this.mode = \"viewAnns\";\n    }\n\n    this.docUpdateForm = new FormGroup({\n      title: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n    });\n\n    this.sub = this.docsService.docInfoUpdated.subscribe(\n      res =>{\n        if(this.documentId === res.documentId){\n          this.documentTitle = res.documentTitle;\n          this.updatingDocInfo = false;\n          this.docUpdateForm.reset();\n        }\n      }\n    )\n\n  }\n\n  private _loadPdf(){\n    if(this.iframe){\n      let viewerUrl = `/assets/pdfjs/web/viewer.html?file=${this.documentUrl}`\n      this.iframe.nativeElement.src = viewerUrl;\n      return;\n    }else{\n      setTimeout(()=>{\n        this._loadPdf()\n      }, 200)\n    }\n  }\n\n  showDocUpdateForm(){\n    this.updatingDocInfo = true;\n    this.docUpdateForm.setValue({\n      title: this.documentTitle\n    });\n  }\n\n  saveUpdate(){\n    const doc : Document = {\n        _id: this.documentId,\n        title: this.docUpdateForm.value.title,\n        authors: null,\n        userId:null,\n        entityType:null,\n        entityId:null,\n        uploadTime:null,\n        canDelete: null,\n        fileType: null,\n    }\n\n    this.docsService.updateDoc(doc);\n  }\n\n  closeDoc(){\n    this.docsService.closeDoc.next(this.documentId);\n  }\n\n\n  displayFullDoc(event: Event){\n    this.mode = \"viewDoc\";\n    this.onChangeMode.emit(\"viewDoc\");\n    this._loadPdf();\n  }\n\n  viewAnns(){\n    //@Todo set annoated page as current page\n    //this.annotatedPage = 1;\n    this.mode = \"viewAnns\";\n    this.annotatedPage = +localStorage.getItem(\"currentPage\");\n    this.onChangeMode.emit(\"viewAnns\")\n  }\n\n  ngOnDestroy(){\n    localStorage.removeItem(\"currentPage\");\n  }\n\n}\n\n\n/*\n@Component({\n  templateUrl: 'docs-in-entity-bottom-sheet.html',\n})\nexport class DocsInEntityBottomSheet {\n  public docsInEntity: Document[] = [];\n  public docsToDisplay: Document[] = [];\n\n\n  private entityType:string;\n  private entityName: string;\n  private entityId:string;\n\n  private currentPageIndex = 0;\n  //public pageSizeOptions = [2,4,10,15,20];\n  public pageSize = 10;\n  public totalDocsCount: number;\n\n  public keywords:string;\n\n  constructor(\n    @Inject(MAT_BOTTOM_SHEET_DATA) public data: any,\n    private comm: CommunicationService,\n    private bottomSheetRef: MatBottomSheetRef<DocsInEntityBottomSheet>) {}\n\n  ngOnInit(){\n    this.docsInEntity = this.data.docsInEntity;\n    this.docsToDisplay = this.docsInEntity.slice(0, this.pageSize);\n    this.totalDocsCount = this.docsInEntity.length;\n    this.entityType = this.data.entityType;\n    this.entityName = this.data.entityName;\n    this.entityId = this.data.entityId;\n  }\n\n\n  openLink(event: MouseEvent, doc: Document): void {\n    this.bottomSheetRef.dismiss();\n    event.preventDefault();\n\n    this.comm.docIdAndPageUpdated.next({\n      documentId: doc._id,\n      page: 1\n    });\n\n\n  }\n\n  onChangePagination(pageData: PageEvent){\n    this.currentPageIndex = pageData.pageIndex;\n\n    this.docsToDisplay = this.docsInEntity.slice(\n      this.currentPageIndex,\n      this.currentPageIndex + this.pageSize);\n  }\n\n\n  searchDoc(event: Event){\n    const keywords = (<HTMLInputElement>event.target).value;\n\n    if(keywords!=\"\"){\n      const keywordsList = keywords.split(\" \")\n\n      let docsToDisplay = [];\n      let cp = [...this.docsInEntity];\n\n      for (let keyword of keywordsList){\n        for(let i = 0; i < cp.length; i++){\n          if(cp[i].title.toLowerCase().includes(keyword)){\n            docsToDisplay.push(cp[i]);\n            cp.splice(i, 1);\n          }\n        }\n      }\n\n      this.docsToDisplay = docsToDisplay;\n    }else{\n\n      this.docsToDisplay = this.docsInEntity.slice(\n        this.currentPageIndex,\n        this.currentPageIndex + this.pageSize);\n    }\n  }\n}\n\n\n\n@Component({\n  templateUrl: 'document-alert-bottom-sheet.html',\n  styleUrls: ['./document-alert-bottom-sheet.css']\n})\nexport class DocumentAlertBottomSheet {\n\n  public updateForm : FormGroup;\n\n  public action: string;\n  public alertMessage : string;\n  public docInfo:Document;\n\n  constructor(\n    @Inject(MAT_BOTTOM_SHEET_DATA) public data: any,\n    private bottomSheetRef: MatBottomSheetRef<DocumentAlertBottomSheet>,\n    private comm: CommunicationService,\n    private docsService: EntityDocumentsService,\n  ){}\n\n  ngOnInit(){\n    this.action = this.data.action;\n    this.alertMessage = this.data.alertMessage;\n    this.docInfo = this.data.docInfo;\n\n    if(this.action==='update'){\n\n      this.updateForm = new FormGroup({\n        title: new FormControl(null, {\n          validators: [Validators.required]\n        }),\n        authors: new FormControl(null,\n          { validators: [] }),\n      });\n\n      this.updateForm.setValue({\n        title: this.docInfo.title,\n        authors: this.docInfo.authors\n      })\n\n    }\n\n\n  }\n\n\n  openDoc(event: MouseEvent): void {\n    this.bottomSheetRef.dismiss();\n    event.preventDefault();\n\n    this.comm.docIdAndPageUpdated.next({\n      documentId: this.docInfo._id,\n      page: 1,\n    });\n  }\n\n  saveUpdate(event: MouseEvent): void {\n    this.bottomSheetRef.dismiss();\n    event.preventDefault();\n\n    this.docInfo.title = this.updateForm.value.title;\n    this.docInfo.authors = this.updateForm.value.authors;\n\n    this.docsService.updateDoc(this.docInfo, this.data.index);\n    this.updateForm.reset();\n\n  }\n\n}\n*/\n","module.exports = \".main {\\n  width:800px;\\n  margin:auto;\\n}\\n\\n\\nmat-form-field,\\ninput{\\n  width: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZW50aXRpZXMvZW50aXRpZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7RUFDWixZQUFZO0NBQ2I7OztBQUdEOztFQUVFLFlBQVk7Q0FDYiIsImZpbGUiOiJzcmMvYXBwL2VudGl0aWVzL2VudGl0aWVzLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XG4gIHdpZHRoOjgwMHB4O1xuICBtYXJnaW46YXV0bztcbn1cblxuXG5tYXQtZm9ybS1maWVsZCxcbmlucHV0e1xuICB3aWR0aDogMTAwJTtcbn1cbiJdfQ== */\"","module.exports = \"<div class=\\\"main\\\">\\n  <mat-tab-group [selectedIndex]=\\\"tabIdx\\\">\\n\\n\\n    <mat-tab *ngIf=\\\"entityType!='my-library'\\\"\\n    label=\\\"My {{entityType}}\\\">\\n      <mat-nav-list>\\n        <a *ngFor=\\\"let c of myEntities\\\"\\n        mat-list-item (click)=\\\"displayEntity(c)\\\">\\n          <span mat-line>{{c.name}}</span>\\n        </a>\\n      </mat-nav-list>\\n    </mat-tab>\\n\\n\\n    <mat-tab label=\\\"Create a {{ singleEntity }}\\\">\\n\\n    <mat-card>\\n      <mat-card-content>\\n\\n        <form [formGroup]=\\\"form\\\" (submit)=\\\"createEntity()\\\">\\n          <mat-form-field>\\n            <input matInput type=\\\"text\\\" formControlName=\\\"name\\\"\\n            placeholder=\\\"Name of the {{singleEntity}}\\\">\\n            <mat-error *ngIf=\\\"form.get('name').invalid\\\">\\n              Please enter the name of the {{singleEntity}} you want to create\\n            </mat-error>\\n          </mat-form-field>\\n          <mat-form-field>\\n            <input matInput formControlName=\\\"description\\\"\\n              placeholder=\\\"describe your {{ singleEntity }} \\\">\\n            <mat-error *ngIf=\\\"form.get('description').invalid\\\">\\n              Please describe your {{ singleEntity }}\\n            </mat-error>\\n          </mat-form-field>\\n\\n          <div class=\\\"action\\\">\\n            <button mat-button color=\\\"primary\\\" type=\\\"submit\\\">\\n              Create {{singleEntity}}\\n            </button>\\n\\n            <button mat-button color=\\\"warn\\\"\\n            (click)=\\\"discard()\\\">\\n              Discard\\n            </button>\\n          </div>\\n        </form>\\n\\n      </mat-card-content>\\n    </mat-card>\\n\\n    </mat-tab>\\n\\n\\n    <mat-tab label=\\\"What you can do\\\">\\n      <div *ngIf=\\\"entityType==='groups'\\\">\\n\\n      <h3 class=\\\"text text-info\\\">\\n        <b>Groups</b> is an app that enable users in the same\\n        group to share annotations amongst each other.\\n      </h3>\\n\\n\\n        If you are a student, you can use this app to\\n        <ul>\\n          <li>\\n            Create a study group\\n          </li>\\n          <li>\\n            Add your friends to the study group\\n          </li>\\n          <li>\\n            Upload and share lecture material in your study group\\n          </li>\\n          <li>\\n            Post questions on the shared documents\\n          </li>\\n          <li>\\n            Help each other by responding to questions\\n          </li>\\n        </ul>\\n\\n\\n        To create a group,\\n        <ul>\\n          <li>\\n            Click on \\\"Create a group\\\".\\n          </li>\\n          <li>\\n            After filling out \\\"group name\\\" and \\\"description\\\",\\n            click \\\"Create group\\\"\\n          </li>\\n        </ul>\\n\\n        You are able to invite other others to join your group by sending\\n        them a link (you can see more detail about this once you navigated to\\n        a particular group).\\n\\n        You can see a list of groups that you are a member of at \\\"My groups\\\".\\n        To navigate to one of them, just click on the group name.\\n      </div>\\n\\n\\n      <div *ngIf=\\\"entityType==='classes'\\\">\\n\\n      <h3 class=\\\"text text-info\\\">\\n        <b>Classes</b> is an app for instructors and student.\\n      </h3>\\n\\n        If you are an instructor, you can use this app to\\n        <ul>\\n          <li>\\n            Create a class\\n          </li>\\n          <li>\\n            Invite your students to join your class\\n          </li>\\n          <li>\\n            Upload and share lecture material to your students\\n          </li>\\n          <li>\\n            Help your students by responding to their questions\\n          </li>\\n          <li>\\n            Teach more efficiently\\n          </li>\\n        </ul>\\n\\n        If you are a student, you can use this app to\\n        <ul>\\n          <li>\\n            Join a class\\n          </li>\\n          <li>\\n            Post questions on the materials your instructor uploaded\\n          </li>\\n          <li>\\n            Help each other by responding to other students' question\\n          </li>\\n          <li>\\n            Learn better\\n          </li>\\n        </ul>\\n\\n\\n        To create a class,\\n        <ul>\\n          <li>\\n            Click on \\\"Create a class\\\".\\n          </li>\\n          <li>\\n            After filling out \\\"class name\\\" and \\\"description\\\",\\n            click \\\"Create class\\\"\\n          </li>\\n        </ul>\\n\\n        You are able to invite other others to join your class by sending\\n        them a link (you can see more detail about this once you navigated to\\n        a particular class).\\n\\n        You can see a list of classes that you are a member of at \\\"My classes\\\".\\n        To navigate to one of them, just click on the class name.\\n      </div>\\n\\n\\n\\n    </mat-tab>\\n\\n\\n  </mat-tab-group>\\n</div>\\n\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from \"../auth/auth.service\";\n\nimport { Router } from \"@angular/router\";\n\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { Class } from \"@app/models/class.model\";\nimport { Group } from \"@app/models/group.model\";\nimport { EntitiesService } from \"@app/entities/entities.service\";\nimport { Subscription } from \"rxjs\";\n\n\n@Component({\n  selector: 'app-entities',\n  templateUrl: './entities.component.html',\n  styleUrls: ['./entities.component.css']\n})\nexport class EntitiesComponent implements OnInit {\n  public entityType:string;\n  public singleEntity:string;\n\n  public myEntities : Class[] | Group[] = [];\n  public form: FormGroup;\n  private sub : Subscription;\n\n  public tabIdx:number = 0;\n\n\n  constructor(\n    private route: ActivatedRoute,\n    private mainService: EntitiesService,\n    private authService: AuthService,\n    private router: Router) {}\n\n  ngOnInit() {\n\n    this.route.paramMap.subscribe(\n      (paramMap: ParamMap) => {\n        this.entityType = paramMap.get(\"entityType\");\n        if(this.entityType===\"classes\"){\n          this.singleEntity = \"class\"\n        }\n        if(this.entityType===\"groups\"){\n          this.singleEntity = \"group\"\n        }\n\n\n        this.mainService.getEntities(this.entityType)\n      }\n    )\n\n\n    this.form = new FormGroup({\n      name: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(3)]\n      }),\n      description: new FormControl(null,\n        { validators: [Validators.required] }),\n    });\n\n    this.sub = this.mainService.myEntitiesUpdated.subscribe(\n      res => {\n        this.myEntities = res;\n\n        if(this.myEntities.length === 0){\n          this.tabIdx = 2\n        }else{\n          this.tabIdx = 0\n        }\n      }\n    )\n  }\n\n  createEntity(){\n    if(this.form.invalid){\n      return;\n    }\n    if(this.entityType===\"classes\"){\n      // constructo group object\n      let newClass : Class = {\n        _id: null,\n        creatorId: \"backend\",\n        name: this.form.value.name,\n        description: this.form.value.description,\n        membersId: [],\n      }\n\n      this.mainService.createEntity(\"classes\", newClass)\n    }\n\n    if(this.entityType===\"groups\"){\n\n      let newGroup : Group = {\n        _id: null,\n        name: this.form.value.name,\n        description: this.form.value.description,\n      }\n\n       this.mainService.createEntity(\"groups\", newGroup)\n    }\n\n    this.form.reset();\n  }\n\n\n  discard(){\n    this.form.reset();\n  }\n\n  displayEntity(entity: Class | Group){\n    this.router.navigate([\"entity\", this.entityType, entity.name, entity._id]);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from \"@angular/common/http\";\nimport { Subject } from \"rxjs\";\nimport { AuthService } from \"@app/auth/auth.service\";\nimport { Class } from \"@app/models/class.model\";\nimport { Group } from \"@app/models/group.model\";\n\nimport { environment } from \"@env/environment\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntitiesService {\n  private apiUrl = environment.apiUrl + \"/entities/\"\n  private myEntities = [];\n  public myEntitiesUpdated = new Subject<any[]>();\n\n  private selectedEntity: any;\n  public selectedEntityUpdated = new Subject<any>();\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService,\n  ){}\n\n  getEntities(entityType:string){\n    let apiUrl:string\n\n    if(entityType===\"classes\"){\n      apiUrl = this.apiUrl + \"getClasses\"\n    }\n    if(entityType===\"groups\"){\n      apiUrl = this.apiUrl + \"getGroups\"\n    }\n\n\n\n    this.http.get<{entities: any[]}>(\n      apiUrl\n    ).subscribe(\n      res => {\n        this.myEntities = res.entities;\n        this.myEntitiesUpdated.next([...this.myEntities])\n      }\n    )\n  }\n\n  createEntity(entityType: string, entity:Class | Group){\n    let apiUrl:string\n\n    if(entityType===\"classes\"){\n      apiUrl = this.apiUrl + \"createClass\"\n    }\n    if(entityType===\"groups\"){\n      apiUrl = this.apiUrl + \"createGroup\"\n    }\n\n    this.http.post<{entity: any}>(\n      apiUrl, entity\n    ).subscribe(\n      res => {\n        this.myEntities.push(res.entity);\n        this.myEntitiesUpdated.next([...this.myEntities]);\n      }\n    );\n  }\n\n  getEntityInfo(entityType:string, entityId?:string){\n    const params = new HttpParams()\n    .set(\"entityType\", entityType)\n    .set(\"entityId\", entityId)\n\n    this.http.get<{entity: any}>(\n      this.apiUrl + \"getEntityInfo\", {params: params}\n    ).subscribe(\n      res => {\n        this.selectedEntity = res.entity;\n        this.selectedEntityUpdated.next(this.selectedEntity);\n      }\n    )\n  }\n\n  updateEntity(entityType: string, entity: Class | Group){\n    let apiUrl:string;\n    if(entityType===\"groups\"){\n      apiUrl = this.apiUrl + \"updateGroup\";\n    }\n\n    if(entityType===\"classes\"){\n      apiUrl = this.apiUrl + \"updateClass\";\n    }\n\n    return this.http.put<{message: string}>(\n      apiUrl, entity\n    );\n  }\n\n}\n","module.exports = \"<h3 class=\\\"text text-info\\\">\\n  You can do many fancy things when search for annotations\\n</h3>\\n\\n<p>\\nWhen you first land to this page, by default, the root annotations\\nin your group / class / My Library will show up. A root annotation\\nis the starting point of a thread a user made on a document.\\n</p>\\n\\n<h4 class=\\\"text text-info\\\">\\n  The obvious\\n</h4>\\n<p>\\n  Obviously, you can search annotations by keywords.\\n  Type the keywords in the search bar and hit enter.\\n</p>\\n\\n<h4 class=\\\"text text-info\\\">\\n  The not-so-obvious\\n</h4>\\n\\n<p>\\n  <b>Wild card search</b>\\n  If you want to see every annotation created in your group / class\\n  or My Library, type: <br>\\n  <code>\\n    *\\n  </code>\\n  <br>\\n  in the search bar and hit enter. This will give you every annotation\\n  (root, responses, nested-responses...).\\n  <br>\\n\\n  <p>\\n  You can append some filter options to your keywords\\n  to limit the search scope.\\n  <br>\\n  <b>Only see annotations created by certain user</b>\\n\\n  For example, if you want\\n  to search for annotations with keywords \\\"Tower of Babel\\\"\\n  <b>created by yourself</b>. Then, type\\n  <br>\\n  <code>\\n    Tower of Babel | --creator-name \\\"your username\\\"\\n  </code>\\n  Likewise, if for some reason you want to see annotations\\n  with keywords \\\"Tower of Babel\\\" created by another user\\n  in your class or group. They, type\\n  <br>\\n  <code>\\n    Tower of Bable | --creator-name \\\"another user's username\\\"\\n  </code>\\n  <br>\\n\\n  <b>Only see root annotations</b>\\n  If you just want to see root annotations with the keywords\\n  \\\"Tower of Babel\\\". Type: <br>\\n  <code>\\n    Tower of Babel | --root-only\\n  </code>\\n\\n  <br>\\n  <b>Aggregation</b>\\n  You can use --creator-name and --root-only filter together.\\n  For example: if you type: <br>\\n  <code>\\n    Tower of Babel | --creator-name \\\"Alice\\\" --root-only\\n  </code>\\n  you will see root annotations created by Alice (if she is in your group),\\n  with the keywords \\\"Tower of Babel\\\".\\n  <br>\\n  If you type:<br>\\n  <code>\\n    * | --creator-name \\\"Alice\\\" --root-only\\n  </code>\\n  you will see every root annotation created by Alice.\\n\"","module.exports = \"<mat-drawer-container class=\\\"example-container\\\">\\n  <mat-drawer mode=\\\"side\\\" [(opened)]=\\\"sideNavOpened\\\" style=\\\"width:150px\\\">\\n    <mat-nav-list>\\n      <button mat-button selected\\n      color=\\\"primary\\\" (click)=\\\"showEntityInfo()\\\">\\n        {{ entityName }}\\n      </button>\\n\\n      <a mat-list-item (click)=\\\"showDocuments()\\\">\\n        Documents\\n      </a>\\n\\n\\n      <a mat-list-item (click)=\\\"showAnnotations()\\\">\\n        Annotations\\n      </a>\\n\\n      <!--div *ngIf=\\\"panel=='annotations'\\\" class=\\\"annotations-control\\\">\\n        <mat-nav-list>\\n          <a mat-list-item>\\n            Roots\\n          </a>\\n          <a mat-list-item>\\n            Unread\\n          </a>\\n          <a mat-list-item>\\n            Important\\n          </a>\\n          <a mat-list-item>\\n            Created by me\\n          </a>\\n        </mat-nav-list>\\n      </div-->\\n      <hr>\\n    </mat-nav-list>\\n\\n    <mat-nav-list *ngIf=\\\"activatedDocs.length > 0\\\">\\n      <div *ngFor=\\\"let activatedDoc of activatedDocs\\\">\\n        <a mat-list-item (click)=\\\"displayDoc(activatedDoc)\\\">\\n          {{activatedDoc.title | shorten:10}}\\n        </a>\\n      </div>\\n    </mat-nav-list>\\n\\n  </mat-drawer>\\n\\n  <mat-drawer-content>\\n\\n    <div *ngIf=\\\"panel==='entityInfo'\\\">\\n      <mat-toolbar *ngIf=\\\"entityData\\\">\\n        {{entityName}}\\n\\n        <button mat-button color=\\\"primary\\\"\\n        *ngIf=\\\"entityData.userIsCreator\\\"\\n        (click)=\\\"showUpdateEntityForm()\\\">\\n          Edit {{entity}} info\\n        </button>\\n\\n        <span class=\\\"example-fill-remaining-space\\\">\\n        </span>\\n\\n        <!--button mat-button color=\\\"warn\\\"\\n        *ngIf=\\\"entityData.userIsCreator && entityData.docsCount===0\\\"\\n        (click)=\\\"deleteEntity()\\\">\\n          Delete {{entity}}\\n        </button-->\\n      </mat-toolbar>\\n\\n\\n      <div class=\\\"functionality-tutorial\\\" *ngIf=\\\"entityType!='my-library'\\\">\\n\\n      <mat-card *ngIf=\\\"updatingEntityInfo\\\" id=\\\"entityUpdateForm\\\">\\n        <mat-card-content>\\n\\n          <form [formGroup]=\\\"entityUpdate\\\" (submit)=\\\"updateEntity()\\\">\\n            <mat-form-field>\\n              <input matInput type=\\\"text\\\" formControlName=\\\"name\\\"\\n              placeholder=\\\"Name of the {{singleEntity}}\\\">\\n              <mat-error *ngIf=\\\"entityUpdate.get('name').invalid\\\">\\n                Please enter the name of the {{singleEntity}} you want to create\\n              </mat-error>\\n            </mat-form-field>\\n\\n            <mat-form-field>\\n              <input matInput formControlName=\\\"description\\\"\\n                placeholder=\\\"describe your {{ entity}} \\\">\\n              <mat-error *ngIf=\\\"entityUpdate.get('description').invalid\\\">\\n                Please describe your {{ singleEntity }}\\n              </mat-error>\\n            </mat-form-field>\\n\\n            <div>\\n              <button mat-button color=\\\"primary\\\" type=\\\"submit\\\">\\n                Save\\n              </button>\\n\\n              <button mat-button color=\\\"warn\\\"\\n              (click)=\\\"discardEntityUpdate()\\\">\\n                Discard\\n              </button>\\n            </div>\\n\\n          </form>\\n\\n        </mat-card-content>\\n      </mat-card>\\n\\n\\n        <h3 class=\\\"text text-info\\\">\\n          Created by:\\n        </h3>\\n\\n        <h4 *ngIf=\\\"entityData\\\">\\n          {{ entityData.creator}}(admin)\\n        </h4>\\n\\n        <h3 class=\\\"text text-info\\\">\\n          Description of <b>{{ entityName }}</b>:\\n        </h3>\\n        <h4 *ngIf=\\\"entityData\\\">\\n          {{ entityData.description }}\\n        </h4>\\n\\n\\n        <h3 class=\\\"text text-info\\\">\\n          Members in <b>{{ entityName }}</b>:\\n        </h3>\\n\\n        <div *ngIf=\\\"entityData\\\">\\n          <h4 *ngFor=\\\"let member of entityData.members\\\">\\n            {{ member }}\\n          </h4>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"functionality-tutorial\\\" *ngIf=\\\"entityType!=='my-library'\\\">\\n        <h3 class=\\\"text text-info\\\">\\n          To invite people to join <b>{{ entityName }}</b>, email them the link:\\n        </h3>\\n        <h4>\\n          {{ joinLink }}\\n        </h4>\\n      </div>\\n\\n      <div class=\\\"functionality-tutorial\\\" *ngIf=\\\"entityType==='my-library'\\\">\\n        <h3>\\n          <b>My Library</b> is your own space at <b>Interpoalte</b>.\\n        </h3>\\n\\n        <h4>\\n          Documents in <b>My Library</b> are kept private.\\n          Just like documents you uploaded here,\\n          annotations you created in <b>My Library</b> is only\\n          viewable by yourself.\\n        </h4>\\n\\n      </div>\\n\\n      <div class=\\\"functionality-tutorial\\\">\\n        <h3 class=\\\"text text-info\\\">\\n          View and upload documents\\n        </h3>\\n        <h4>\\n          To upload documents and view existing documents in\\n          <b>{{ entityName }}</b>, click\\n          \\\"documents\\\" button on the left panel.\\n\\n          <div *ngIf=\\\"entityType!=='my-library'\\\">\\n          Documents\\n          uploaded in {{ entityName }} can be accessed and viewed\\n          by all members in <b>{{ entityName }}</b>\\n        </div>\\n        </h4>\\n      </div>\\n\\n      <div class=\\\"functionality-tutorial\\\">\\n        <h3 class=\\\"text text-info\\\">\\n          Annotations management\\n        </h3>\\n\\n        <h4>\\n          To view and search annotations created in <b>{{entityName}}</b>,\\n          click on \\\"annotations\\\" button on the left panel.\\n        </h4>\\n\\n\\n\\n      </div>\\n\\n\\n\\n\\n\\n      <!--div id=\\\"entityAction\\\">\\n        <button mat-stroked-button color=\\\"primary\\\">\\n          Update {{ entity }} info\\n        </button>\\n\\n        <button mat-stroked-button\\n        style=\\\"margin-left:1%\\\"\\n        color=\\\"primary\\\">\\n          Leave {{ entity }}\\n        </button>\\n\\n        <button mat-stroked-button\\n        style=\\\"margin-left:1%\\\"\\n        color=\\\"primary\\\">\\n          Delete {{ entity }}\\n        </button>\\n      </div-->\\n\\n\\n\\n      <div id=\\\"info\\\" *ngIf=\\\"entityType=='my-library'\\\">\\n\\n      </div>\\n    </div>\\n\\n    <div *ngIf=\\\"panel==='documents'\\\">\\n\\n        <mat-toolbar>\\n          Documents in {{entityName}}\\n\\n        <button mat-button selected color=\\\"primary\\\"\\n        *ngIf=\\\"userCanUpload\\\"\\n        matTooltip=\\\"upload a pdf file\\\" type=\\\"button\\\"\\n        (click)=\\\"filePicker.click()\\\">\\n          <mat-icon>cloud_upload</mat-icon>\\n          <span> Upload </span>\\n        </button>\\n\\n\\n          <span class=\\\"example-fill-remaining-space\\\">\\n          </span>\\n\\n          <mat-form-field class=\\\"search-bar\\\">\\n            <input matInput\\n            type=\\\"text\\\"\\n            placeholder=\\\"search for a document\\\"\\n            (keyup.backspace)=\\\"searchDoc($event)\\\"\\n            (keydown.enter)=\\\"searchDoc($event)\\\">\\n          </mat-form-field>\\n\\n        </mat-toolbar>\\n\\n        <div class=\\\"plain-text\\\">\\n          <h3 class=\\\"text text-info\\\"\\n          *ngIf=\\\"!searchPlaced && docsInEntity.length==0\\\">\\n            No documents have been uploaded\\n          </h3>\\n\\n          <h3 class=\\\"text text-info\\\"\\n          *ngIf=\\\"!searchPlaced && docsInEntity.length>0\\\">\\n            Please select a document to display\\n          </h3>\\n\\n          <h3 class=\\\"text text-info\\\"\\n          *ngIf=\\\"searchPlaced && docsToDisplay.length===0\\\">\\n            No documents match your search\\n          </h3>\\n\\n          <h3 class=\\\"text text-info\\\"\\n          *ngIf=\\\"searchPlaced && docsToDisplay.length>0\\\">\\n            Please select a document to display\\n          </h3>\\n        </div>\\n\\n\\n        <mat-nav-list *ngIf=\\\"!searchPlaced\\\">\\n        <a *ngFor=\\\"let doc of docsInEntity\\\" mat-list-item\\n        (click)=\\\"getFile(doc)\\\">\\n          <span mat-line>{{doc.title}}</span>\\n        </a>\\n        </mat-nav-list>\\n\\n        <mat-nav-list *ngIf=\\\"searchPlaced\\\">\\n        <a *ngFor=\\\"let doc of docsToDisplay\\\" mat-list-item\\n        (click)=\\\"getFile(doc)\\\">\\n          <span mat-line>{{doc.title}}</span>\\n        </a>\\n        </mat-nav-list>\\n\\n\\n      <input type=\\\"file\\\" accept=\\\"application/pdf\\\"\\n      #filePicker (change)=\\\"onFileSelected($event)\\\">\\n    </div>\\n\\n    <div *ngIf=\\\"panel==='annotations'\\\">\\n        <mat-toolbar>\\n          Annotations in {{entityName}}\\n\\n          <button mat-button color=\\\"primary\\\"\\n          (click)=\\\"showAnnsSearchTips()\\\">\\n            Tips\\n          </button>\\n          <span class=\\\"example-fill-remaining-space\\\">\\n          </span>\\n\\n          <mat-form-field class=\\\"search-bar\\\">\\n            <input matInput placeholder=\\\"search and filters\\\"\\n            (keydown.enter)=\\\"search($event)\\\">\\n          </mat-form-field>\\n        </mat-toolbar>\\n\\n        <div class=\\\"plain-text\\\">\\n          <h3 class=\\\"text text-info\\\" *ngIf=\\\"!searchPlaced && annList.length===0\\\">\\n            No annotations have been created in {{ entityName }}\\n          </h3>\\n          <h3 class=\\\"text text-info\\\" *ngIf=\\\"searchPlaced && annList.length===0\\\">\\n            No annotations match your search\\n          </h3>\\n          <h3 class=\\\"text text-info\\\" *ngIf=\\\"!searchPlaced && annList.length>0\\\">\\n            Root annotations in {{ entityName }}\\n          </h3>\\n          <h4 class=\\\"text text-info\\\" *ngIf=\\\"message\\\">\\n            {{ message }}\\n          </h4>\\n        </div>\\n\\n        <div class=\\\"annotations-display\\\"\\n        *ngFor=\\\"let ann of annList\\\">\\n          <a style=\\\"cursor: pointer\\\" (click)=\\\"displayInContext(ann)\\\">\\n            <h4>\\n            Annotation created by {{ann.creatorName}} on\\n            {{ ann.docTitle }} page {{ ann.page}}\\n            </h4>\\n          </a>\\n          <div>\\n\\n            <p mathJax=\\\"{{ann.title}}\\\"></p>\\n            <p mathJax=\\\"{{ann.content }}\\\"></p>\\n\\n          </div>\\n          <hr>\\n        </div>\\n      </div>\\n\\n    <div *ngIf=\\\"panel==='displayDocument'\\\">\\n      <app-doc-display\\n      [documentTitle]=\\\"activeDocTitle\\\"\\n      [documentId]=\\\"activeDocId\\\"\\n      [documentUrl]=\\\"activeDocUrl\\\"\\n      [mode]=\\\"docDisplayMode\\\"\\n      [nodeAnnotationId]=\\\"nodeAnnotationId\\\"\\n\\n      (onChangeMode)=\\\"changeSideNav($event)\\\"\\n      [annotatedPage]=\\\"annotatedPage\\\">\\n      </app-doc-display>\\n\\n    </div>\\n  </mat-drawer-content>\\n</mat-drawer-container>\\n\"","module.exports = \"mat-tab-group {\\n  width: 90%;\\n  margin: auto; }\\n\\n#info {\\n  margin: auto; }\\n\\ninput[type=\\\"file\\\"] {\\n  visibility: hidden; }\\n\\ndiv.plain-text {\\n  margin: 2%; }\\n\\n#documentControl {\\n  float: right; }\\n\\n.functionality-tutorial {\\n  width: 70%;\\n  margin: auto; }\\n\\n#entityAction {\\n  margin-top: 5%; }\\n\\n#control {\\n  float: left;\\n  height: 100%;\\n  margin-top: 1%; }\\n\\n#contents {\\n  margin-left: 10%;\\n  margin-top: 2%;\\n  width: 50%; }\\n\\n.example-container {\\n  width: 100%;\\n  height: 1000px; }\\n\\n.example-fill-remaining-space {\\n  /* This fills the remaining space, by using flexbox.\\n     Every toolbar row uses a flexbox row layout. */\\n  flex: 1 1 auto; }\\n\\n.search-bar {\\n  width: 50%; }\\n\\ndiv.annotations-display {\\n  margin-left: 5%;\\n  width: 50%; }\\n\\ndiv.annotations-control {\\n  margin-left: 10%; }\\n\\n.example-container {\\n  position: absolute;\\n  background: #eee; }\\n\\nmat-drawer {\\n  border-right: 1px solid black; }\\n\\n.content-display-panel {\\n  margin-left: 2%; }\\n\\n#entityUpdateForm {\\n  width: 80%; }\\n\\nmat-form-field {\\n  width: 100%; }\\n\\n/*\\n:host {\\n    >.container {\\n        max-width: 1264px;\\n        width: 100%;\\n        margin: 0 auto;\\n        display: flex;\\n        justify-content: space-between;\\n        //background: none;\\n    }\\n    /deep/ {\\n        .mat-tab-group {\\n            flex-direction: row;\\n        }\\n        .mat-tab-header {\\n          border-bottom: none;\\n        }\\n        .mat-tab-header-pagination {\\n            display: none !important;\\n        }\\n        .mat-tab-labels {\\n            flex-direction: column;\\n        }\\n        .mat-ink-bar {\\n            height: 100%;\\n            left: 98% !important;\\n        }\\n        .mat-tab-body-wrapper {\\n            flex: 1 1 auto;\\n        }\\n    }\\n}\\n\\n.container {\\n    position: relative;\\n    width: 100%;\\n    flex: 1 0 auto;\\n    margin: 0 auto;\\n    text-align: left;\\n}\\n\\n#content {\\n    box-sizing: content-box;\\n    margin: 0 auto;\\n    padding: 15px;\\n    width: 1264px;\\n    //background-color: #ffffff;\\n}\\n\\n#content {\\n    max-width: 1100px;\\n    width: 100%;\\n    //background-color: #ffffff;\\n    padding: 24px;\\n    box-sizing: border-box;\\n}\\n\\n#content,\\n#main-content {\\n    &::before,\\n    &::after {\\n        content: \\\"\\\";\\n        display: table;\\n    }\\n    &::after {\\n        clear: both;\\n    }\\n}\\n\\n*/\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zY3IxL2xpMTA4L0NvZGluZ0V4L2ludGVycG9sYXRlL3NyYy9hcHAvZW50aXR5LWRldGFpbC9lbnRpdHktZGV0YWlsLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVTtFQUNWLGFBQVcsRUFDWjs7QUFFRDtFQUNFLGFBQVksRUFDYjs7QUFFRDtFQUNFLG1CQUFrQixFQUNuQjs7QUFHRDtFQUNFLFdBQVMsRUFDVjs7QUFFRDtFQUNFLGFBQVksRUFDYjs7QUFHRDtFQUNFLFdBQVM7RUFDVCxhQUFXLEVBRVo7O0FBRUQ7RUFDRSxlQUFhLEVBQ2Q7O0FBRUQ7RUFDRSxZQUFVO0VBQ1YsYUFBVztFQUNYLGVBQWEsRUFDZDs7QUFFRDtFQUNFLGlCQUFlO0VBQ2YsZUFBYTtFQUNiLFdBQVMsRUFDVjs7QUFFRDtFQUNFLFlBQVc7RUFDWCxlQUFhLEVBQ2Q7O0FBRUQ7RUFDRTtvREFDa0Q7RUFDbEQsZUFBYyxFQUNmOztBQUVEO0VBQ0UsV0FBUyxFQUNWOztBQUdEO0VBQ0UsZ0JBQWM7RUFDZCxXQUFTLEVBQ1Y7O0FBRUQ7RUFDRSxpQkFBZSxFQUNoQjs7QUFFRDtFQUNFLG1CQUFrQjtFQUNsQixpQkFBZ0IsRUFDakI7O0FBQUM7RUFDQSw4QkFBNkIsRUFDOUI7O0FBRUQ7RUFDRSxnQkFBZSxFQUNoQjs7QUFFRDtFQUNFLFdBQVMsRUFFVjs7QUFBQTtFQUNDLFlBQ0YsRUFBQzs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBcUVFIiwiZmlsZSI6InNyYy9hcHAvZW50aXR5LWRldGFpbC9lbnRpdHktZGV0YWlsLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsibWF0LXRhYi1ncm91cCB7XG4gIHdpZHRoOiA5MCU7XG4gIG1hcmdpbjphdXRvO1xufVxuXG4jaW5mbyB7XG4gIG1hcmdpbjogYXV0bztcbn1cblxuaW5wdXRbdHlwZT1cImZpbGVcIl0ge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cblxuZGl2LnBsYWluLXRleHQge1xuICBtYXJnaW46MiU7XG59XG5cbiNkb2N1bWVudENvbnRyb2wge1xuICBmbG9hdDogcmlnaHQ7XG59XG5cblxuLmZ1bmN0aW9uYWxpdHktdHV0b3JpYWwge1xuICB3aWR0aDo3MCU7XG4gIG1hcmdpbjphdXRvO1xuXG59XG5cbiNlbnRpdHlBY3Rpb257XG4gIG1hcmdpbi10b3A6NSU7XG59XG5cbiNjb250cm9se1xuICBmbG9hdDpsZWZ0O1xuICBoZWlnaHQ6MTAwJTtcbiAgbWFyZ2luLXRvcDoxJTtcbn1cblxuI2NvbnRlbnRzIHtcbiAgbWFyZ2luLWxlZnQ6MTAlO1xuICBtYXJnaW4tdG9wOjIlO1xuICB3aWR0aDo1MCU7XG59XG5cbi5leGFtcGxlLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6MTAwMHB4O1xufVxuXG4uZXhhbXBsZS1maWxsLXJlbWFpbmluZy1zcGFjZSB7XG4gIC8qIFRoaXMgZmlsbHMgdGhlIHJlbWFpbmluZyBzcGFjZSwgYnkgdXNpbmcgZmxleGJveC5cbiAgICAgRXZlcnkgdG9vbGJhciByb3cgdXNlcyBhIGZsZXhib3ggcm93IGxheW91dC4gKi9cbiAgZmxleDogMSAxIGF1dG87XG59XG5cbi5zZWFyY2gtYmFyIHtcbiAgd2lkdGg6NTAlO1xufVxuXG5cbmRpdi5hbm5vdGF0aW9ucy1kaXNwbGF5e1xuICBtYXJnaW4tbGVmdDo1JTtcbiAgd2lkdGg6NTAlO1xufVxuXG5kaXYuYW5ub3RhdGlvbnMtY29udHJvbCB7XG4gIG1hcmdpbi1sZWZ0OjEwJTtcbn1cblxuLmV4YW1wbGUtY29udGFpbmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBiYWNrZ3JvdW5kOiAjZWVlO1xufSBtYXQtZHJhd2VyIHtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgYmxhY2s7XG59XG5cbi5jb250ZW50LWRpc3BsYXktcGFuZWwge1xuICBtYXJnaW4tbGVmdDogMiU7XG59XG5cbiNlbnRpdHlVcGRhdGVGb3JtIHtcbiAgd2lkdGg6ODAlO1xuXG59bWF0LWZvcm0tZmllbGR7XG4gIHdpZHRoOjEwMCVcbn1cblxuLypcbjpob3N0IHtcbiAgICA+LmNvbnRhaW5lciB7XG4gICAgICAgIG1heC13aWR0aDogMTI2NHB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgLy9iYWNrZ3JvdW5kOiBub25lO1xuICAgIH1cbiAgICAvZGVlcC8ge1xuICAgICAgICAubWF0LXRhYi1ncm91cCB7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICB9XG4gICAgICAgIC5tYXQtdGFiLWhlYWRlciB7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAubWF0LXRhYi1oZWFkZXItcGFnaW5hdGlvbiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLm1hdC10YWItbGFiZWxzIHtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLm1hdC1pbmstYmFyIHtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGxlZnQ6IDk4JSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIC5tYXQtdGFiLWJvZHktd3JhcHBlciB7XG4gICAgICAgICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLmNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGZsZXg6IDEgMCBhdXRvO1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG59XG5cbiNjb250ZW50IHtcbiAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBwYWRkaW5nOiAxNXB4O1xuICAgIHdpZHRoOiAxMjY0cHg7XG4gICAgLy9iYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xufVxuXG4jY29udGVudCB7XG4gICAgbWF4LXdpZHRoOiAxMTAwcHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgLy9iYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICAgIHBhZGRpbmc6IDI0cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuI2NvbnRlbnQsXG4jbWFpbi1jb250ZW50IHtcbiAgICAmOjpiZWZvcmUsXG4gICAgJjo6YWZ0ZXIge1xuICAgICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgICBkaXNwbGF5OiB0YWJsZTtcbiAgICB9XG4gICAgJjo6YWZ0ZXIge1xuICAgICAgICBjbGVhcjogYm90aDtcbiAgICB9XG59XG5cbiovXG4iXX0= */\"","//dispaly the detail info of a group and class\n\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from \"@angular/router\";\nimport { Location } from \"@angular/common\";\n\nimport { AuthService } from \"@app/auth/auth.service\";\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { environment } from \"@env/environment\";\nimport { MatTabChangeEvent } from \"@angular/material\";\nimport { EntitiesService } from \"@app/entities/entities.service\"\nimport { Subscription } from \"rxjs\"\nimport { EntityDocumentsService } from\n\"@app/entity-documents/entity-documents.service\";\nimport { Document } from \"@app/models/document.model\";\nimport { Annotation } from \"@app/models/annotation.model\";\nimport { mimeType } from \"@app/helpers/mime-type.validator\";\nimport { CommunicationService } from \"@app/communication.service\";\nimport { AnnotationsService } from \"@app/annotations/annotations.service\";\nimport { DocDisplayComponent } from \"@app/doc-display/doc-display.component\";\n\n\nimport { MatBottomSheet, MatBottomSheetRef} from '@angular/material';\nimport{ Inject } from \"@angular/core\";\nimport { MAT_BOTTOM_SHEET_DATA } from '@angular/material';\n\n\ninterface ActivatedDoc {\n  title: string,\n  documentId: string,\n  documentUrl: string,\n}\n\ninterface Query {\n  documentId:string,\n  page: number,\n}\n\ninterface Filter {\n  creatorName: string,\n  editorName: string,\n  documentId: string,\n  page: number,\n  parent: string,\n};\n\ninterface QueryObject {\n  keywords: string,\n  entityType: string,\n  entityId:string,\n  filter: Filter,\n}\n\n@Component({\n  selector: 'app-entity-detail',\n  templateUrl: './entity-detail.component.html',\n  styleUrls: ['./entity-detail.component.scss']\n})\nexport class EntityDetailComponent implements OnInit {\n  @ViewChild('docDisplay') docDisplay: DocDisplayComponent;\n\n\n  public entityType:string;\n  public entity:string;\n  public entityName: string;\n  public entityId: string;\n\n  private entityData: any;\n\n  public entityUpdate: FormGroup;\n  public updatingEntityInfo: boolean = false;\n\n  public uploadForm : FormGroup;\n  public docsInEntity: Document[]=[];\n  public docsToDisplay: Document[]=[];\n\n  public activatedDocs: ActivatedDoc[] = [];\n\n  public activeDocTitle: string;\n  public activeDocId:string;\n  public activeDocUrl:string;\n  public docDisplayMode:string = \"viewDoc\";\n\n  public annList : Annotation[]=[];\n  public annotatedPage: number;\n  public nodeAnnotationId: string;\n\n  public fileTypeValid = false;\n  public joinLink: string;\n  private sub: Subscription;\n\n  public userCanUpload:boolean = true;\n  public userName:string;\n\n\n  public panel:string = \"entityInfo\";\n  public message:string;\n  public searchPlaced: boolean = false;\n  public sideNavOpened:boolean = true;\n\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private location: Location,\n    private mainService: EntitiesService,\n    private docsService: EntityDocumentsService,\n    private annotationsService: AnnotationsService,\n    private comm: CommunicationService,\n    private bottomSheet: MatBottomSheet,\n  ) { }\n\n  ngOnInit() {\n\n    this.entityUpdate = new FormGroup({\n      name: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(3)]\n      }),\n      description: new FormControl(null,\n        { validators: [] }),\n    });\n\n    this.uploadForm = new FormGroup({\n      title: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n\n      authors: new FormControl(null,\n        { validators: [] }),\n\n      file: new FormControl(null, {\n        validators: [Validators.required],\n        asyncValidators: []\n      })\n    });\n\n\n\n    this.route.paramMap.subscribe(\n      (paramMap: ParamMap)=>{\n\n        this.entityName = paramMap.get(\"entityName\");\n        this.entityType = paramMap.get(\"entityType\");\n        this.entityId = paramMap.get(\"entityId\");\n\n        if(this.entityType==null){\n          this.entityType = \"my-library\";\n          this.entityName = \"My Library\";\n        }\n\n        if(this.entityType==\"classes\"){\n          this.entity = \"class\"\n        }\n\n        if(this.entityType==\"groups\"){\n          this.entity = \"group\"\n        }\n\n        if(this.entityType!=\"my-library\"){\n\n          this.mainService.getEntityInfo(\n            this.entityType,\n            this.entityId\n          )\n        }\n\n\n\n        this.joinLink = environment.frontEndUrl + \"/entity/join/\" + this.entityType  +\n        \"/\" + this.entityName + \"/\" + this.entityId\n      }\n    );\n\n    this.sub = this.mainService.selectedEntityUpdated.subscribe(\n      res => {\n        this.entityData = res;\n\n        if(this.entityType==\"classes\" && this.entityData.userIsCreator === false){\n          this.userCanUpload = false\n        }\n\n      }\n    );\n\n\n    this.sub= this.docsService.docsUpdatedObs()\n    .subscribe(\n      res => {\n        this.docsInEntity = res;\n      }\n    );\n\n    this.sub = this.docsService.closeDoc.subscribe(\n      documentId => {\n\n        this.activatedDocs = this.activatedDocs.filter(\n          item => item.documentId != documentId\n        );\n\n        this.panel = \"documents\";\n      }\n    )\n\n\n    this.sub = this.annotationsService.annListUpdated\n    .subscribe(\n      res => {\n        this.annList = res.annotations;\n        //this.getMethod = res.getMethod;\n      }\n    );\n\n    this.sub = this.docsService.docInfoUpdated.subscribe(\n      res => {\n        this.activatedDocs.forEach(doc => {\n          if(doc.documentId === res.documentId){\n            const idx = this.activatedDocs.indexOf(doc);\n            doc.title = res.documentTitle;\n            this.activatedDocs[idx] = doc\n          }\n        });\n\n        this.activeDocTitle = res.documentTitle\n      }\n    )\n  }\n\n  changeSideNav(event: string){\n    console.log(event);\n\n\n    if(event===\"viewAnns\"){\n      this.sideNavOpened = false;\n    }\n\n    if(event===\"viewDoc\"){\n      this.sideNavOpened = true;\n    }\n\n  }\n\n  showEntityInfo(){\n    this.panel = \"entityInfo\";\n    this.searchPlaced = false;\n  }\n\n  showUpdateEntityForm(){\n    this.entityUpdate.setValue({\n      name: this.entityData.name,\n      description: this.entityData.description? this.entityData.description: null,\n    });\n    this.updatingEntityInfo = true;\n  }\n\n  updateEntity(){\n    const entity = {\n      _id: this.entityData._id,\n      name: this.entityUpdate.value.name,\n      description: this.entityUpdate.value.description\n    }\n\n    this.mainService.updateEntity(this.entityType, entity).subscribe(\n      res => {\n        this.updatingEntityInfo = false;\n        this.entityData.name = entity.name;\n        this.entityName = entity.name;\n        this.entityData.description = entity.description;\n\n        this.joinLink = environment.frontEndUrl + \"/entity/join/\" + this.entityType  +\n        \"/\" + this.entityName + \"/\" + this.entityId;\n\n        //this.location.go(\"/entity/\"+this.entityType+\"/\"+this.entityName+\"/\"+this.entityId);\n        this.router.navigate([\"entity\", this.entityType, this.entityName, this.entityId])\n      }\n    )\n  }\n\n\n  discardEntityUpdate(){\n    this.entityUpdate.reset();\n    this.updatingEntityInfo = false;\n  }\n\n  showDocuments(){\n    this.docsService.getEntityDocuments(\n      this.entityType, this.entityId\n    );\n\n    this.panel = \"documents\";\n    this.searchPlaced = false;\n  }\n\n  showAnnotations(){\n    this.panel = \"annotations\";\n    this.searchPlaced = false;\n    // get root annotation of the entity by default\n    const filter = {\n      creatorName: null,\n      editorName:null,\n      documentId: null,\n      page: null,\n      parent: \"root\"\n    }\n\n    const queryObject = {\n      keywords : \"*\",\n      entityType: this.entityType,\n      entityId: this.entityId,\n      filter: filter\n    }\n\n\n    this.annotationsService.searchAnnotations(queryObject);\n  }\n\n  showAnnsSearchTips(){\n    this.bottomSheet.open(AnnotationsSearchTipsBottomSheet);\n  }\n\n\n  search(event: Event){\n    const query = (<HTMLInputElement>event.target).value.trim();\n\n    if(query==\"\"){\n      this.searchPlaced = false;\n      return;\n    }\n\n    this.searchPlaced = true;\n\n    let filterStr:string;\n    let queryObject : QueryObject;\n\n    if(query.indexOf(\"|\") > -1){\n      // if there is a pipeline, then get keywords as\n      // everything before the pipeline\n      const keywords = query.substr(0, query.indexOf(\"|\")).trim();\n\n      if(keywords === \"*\"){\n        //this.keywordsStr = \"\";\n      }else{\n        //this.keywordsStr = keywords;\n      }\n\n      filterStr = query.substr(query.indexOf(\"|\")+1).trim();\n\n      let filter = this.filterParse(filterStr);\n\n      if(filter != false){\n        filter = filter as Filter;\n\n        queryObject = {\n          keywords: keywords,\n          entityType: this.entityType,\n          entityId: this.entityId,\n          filter: filter\n        }\n\n      }else{\n        //this.keywordsStr = \"\";\n        // invalid filter options\n        // display error message to users\n        return;\n      }\n    }else{\n      // keywords only, no filter options\n\n      if(query === \"*\"){\n        //this.keywordsStr = \"\";\n      }else{\n        //this.keywordsStr = query;\n      }\n\n      queryObject = {\n        keywords: query,\n        entityType: this.entityType,\n        entityId: this.entityId,\n        filter : {\n          creatorName: null,\n          editorName: null,\n          documentId: null,\n          page: null,\n          parent: null,\n        }\n      }\n    }\n\n    this.annotationsService.searchAnnotations(queryObject);\n  }\n\n\n    private filterParse (filterStr: string): boolean | Filter {\n      // return a javascript object\n      // get valid options\n      const optionList = [\n        \"--creator-name\", \"--editor-name\",\n        \"--root-only\", // by default, all annotations\n      ]\n\n      // check if filterStr has any invalid options\n      let possibleOptions = [];\n      for (let s of filterStr.split(\" \")){\n        if(s.startsWith(\"--\")){\n          possibleOptions.push(s);\n        }\n      }\n\n      let invalidOptions = [];\n      for (let op of possibleOptions){\n        if(optionList.indexOf(op) == -1){\n          invalidOptions.push(op)\n        }\n      }\n\n      if(invalidOptions.length > 0){\n        this.message = invalidOptions[0] + \" is an invalid option.\";\n        return false;\n\n      }else {\n\n        let filter : Filter = {\n          creatorName: null,\n          editorName: null,\n          parent:null,\n          documentId: null,\n          page: null,\n        };\n\n        for(let op of possibleOptions){\n          if(op==\"--creator-name\"){\n            if(this.valueOf(filterStr, op)!= false){\n              filter[\"creatorName\"] = this.valueOf(filterStr, op) as string;\n            }else{\n              this.message = \"Please supply a valid value for creatorName\";\n              return;\n            }\n          }\n\n          if(op==\"--editor-name\"){\n            if(this.valueOf(filterStr, op) != false){\n              filter[\"editorName\"] = this.valueOf(filterStr, op) as string;\n            }else{\n              this.message = \"Please supply a valid value for editorName\";\n              return;\n            }\n\n          }\n\n          if(op==\"--root-only\"){\n            filter[\"parent\"] = \"root\"\n          }\n        }\n\n        this.message = \"\";\n        return filter;\n\n      }\n\n    }\n\n    private valueOf(filterStr:string, option:string): boolean | string {\n      const list = filterStr.split(\" \");\n      const valueIdx = list.indexOf(option) + 1;\n      if(list[valueIdx].startsWith(\"--\")){\n        return false;\n      }else{\n        return list[valueIdx]\n      }\n    }\n\n\n  displayInContext(ann: Annotation){\n\n    let docIdx : number = -1;\n    for (let doc of this.activatedDocs){\n      if(doc.documentId == ann.documentId){\n        docIdx = this.activatedDocs.indexOf(doc);\n        break;\n      }\n    }\n\n    this.annotatedPage = ann.page;\n    this.nodeAnnotationId = ann._id;\n\n    this.docDisplayMode = \"viewAnns\";\n\n    if(docIdx !==-1){\n      this.openDoc(this.activatedDocs[docIdx]);\n    }else{\n      this.docsService.getDocById(ann.documentId).subscribe(\n        arrayBuffer => {\n          const blob = new Blob([arrayBuffer], {type: \"application/pdf\"});\n          const docUrl = URL.createObjectURL(blob);\n\n          const activatedDoc = {\n            title: ann.docTitle,\n            documentId: ann.documentId,\n            documentUrl: docUrl,\n          }\n\n          this.activatedDocs.push(activatedDoc);\n          //localStorage.setItem(\"initialDisplayedPage\", ann.page)\n          this.openDoc(activatedDoc);\n        }\n      );\n    }\n\n    this.sideNavOpened = false;\n  }\n\n  displayDoc(activatedDoc){\n    this.docDisplayMode = \"viewDoc\";\n    this.annotatedPage = null;\n    this.openDoc(activatedDoc);\n  }\n\n\n\n\n// documents\n  getFile(doc: Document ){\n\n    let docIdx : number = -1;\n    for (let activatedDoc of this.activatedDocs){\n      if(activatedDoc.documentId === doc._id){\n        docIdx = this.activatedDocs.indexOf(activatedDoc);\n        break;\n      }\n    }\n\n    if(docIdx!==-1){\n      this.openDoc(this.activatedDocs[docIdx])\n\n\n    }else{\n      this.docsService.getDocById(doc._id).subscribe(\n        arrayBuffer => {\n          const blob = new Blob([arrayBuffer], {type: \"application/pdf\"});\n          const docUrl = URL.createObjectURL(blob);\n\n          const activatedDoc = {\n            title: doc.title,\n            documentId: doc._id,\n            documentUrl: docUrl,\n          }\n\n          this.activatedDocs.push(activatedDoc);\n\n          this.openDoc(activatedDoc);\n        }\n      );\n    }\n  }\n\n  openDoc(activatedDoc:ActivatedDoc){\n\n    this.activeDocTitle = activatedDoc.title;\n    this.activeDocId = activatedDoc.documentId;\n    this.activeDocUrl = activatedDoc.documentUrl;\n\n    this.panel = \"displayDocument\";\n  }\n\n  closeDoc(activatedDoc: ActivatedDoc){\n    this.activatedDocs = this.activatedDocs.filter(\n      item => item.documentId != activatedDoc.documentId\n    );\n\n    this.panel = \"documents\";\n\n  }\n\n\n  // upload\n  onFileSelected(event: Event){\n\n    const file = (event.target as HTMLInputElement).files[0];\n\n    // verify mimetype\n    if(mimeType(file)){\n      this.fileTypeValid = true;\n\n      this.uploadForm.patchValue({\n        file: file,\n        title: file.name\n       });\n\n      this.uploadForm.get(\"file\").updateValueAndValidity();\n\n      this.uploadFile();\n\n    }else{\n      this.fileTypeValid = false;\n\n      /*\n      this.bottomSheet.open(DocumentAlertBottomSheet, {\n        data: {\n          alertMessage: \"We only support PDF document for now!\"\n        }\n      });\n      */\n    }\n  }\n\n  private uploadFile(){\n\n    let docInfo : Document = {\n      _id : null,\n      title: this.uploadForm.value.title,\n      authors: this.uploadForm.value.authors,\n      userId: null,\n      entityType: this.entityType,\n      entityId: this.entityId,\n      uploadTime: Date.now(),\n      fileType: this.uploadForm.value.file.type,\n    }\n\n    this.docsService.saveDocInfo(\n      docInfo,\n      this.uploadForm.value.file\n    );\n\n    this.uploadForm.reset();\n  }\n\n\n  searchDoc(event: Event){\n    const keywords = (<HTMLInputElement>event.target).value;\n\n    if(keywords!=\"\"){\n      this.searchPlaced = true;\n\n      const keywordsList = keywords.split(\" \")\n\n      let docsToDisplay = [];\n      let cp = [...this.docsInEntity];\n\n      for (let keyword of keywordsList){\n        for(let i = 0; i < cp.length; i++){\n          if(cp[i].title.toLowerCase().includes(keyword)){\n            docsToDisplay.push(cp[i]);\n            cp.splice(i, 1);\n          }\n        }\n      }\n      this.docsToDisplay = docsToDisplay;\n    }else{\n      this.searchPlaced = false;\n\n    }\n  }\n\n\n  ngOnDestroy(){\n  }\n    //this.sub.unsubscribe();\n\n}\n\n\n@Component({\n  //selector: 'bottom-sheet-overview-example-sheet',\n  templateUrl: 'annotations-search-tips-bottom-sheet.html',\n})\nexport class AnnotationsSearchTipsBottomSheet {\n  constructor(private bottomSheetRef: MatBottomSheetRef<AnnotationsSearchTipsBottomSheet>) {}\n\n  openLink(event: MouseEvent): void {\n    this.bottomSheetRef.dismiss();\n    event.preventDefault();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { environment } from \"@env/environment\";\nimport { Document } from \"@app/models/document.model\";\nimport { HttpParams, HttpClient } from \"@angular/common/http\";\nimport { Subject } from \"rxjs\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityDocumentsService {\n  private apiUrl = environment.apiUrl + \"/documents\";\n\n  public docsUpdatedSub = new Subject<Document[]>();\n  public docInfoUpdated = new Subject<{\n    documentId: string,\n    documentTitle: string}>();\n\n  public closeDoc = new Subject<string>();\n\n\n  private docsInEntity: Document[]=[];\n\n\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n\n\n  docsUpdatedObs(){\n    return this.docsUpdatedSub.asObservable();\n  }\n\n  getEntityDocuments(entityType:string, entityId?:string){\n    const params = new HttpParams()\n    .set(\"entityId\", entityId)\n    .set(\"entityType\", entityType);\n\n    this.http.get<{docs:Document[]}>(\n      this.apiUrl + '/getEntityDocuments',\n      {params: params}\n    ).subscribe(\n      res => {\n        this.docsInEntity = res.docs;\n        this.docsUpdatedSub.next([...this.docsInEntity]);\n      }\n    );\n  }\n\n  getDocById(docId:string){\n    const params = new HttpParams()\n    .set(\"_id\", docId);\n    const apiUrl = this.apiUrl + \"/file\";\n\n    return this.http.get(apiUrl, {\n      params: params,\n      responseType: \"arraybuffer\"\n    });\n  }\n\n\n  saveDocInfo(docInfo:Document, file:File){\n    let realDocInfo:Document;\n\n    this.http.post<{docInfo:Document}>(\n      this.apiUrl + \"/saveDocInfo\", docInfo\n    ).subscribe(\n      res => {\n        realDocInfo = res.docInfo;\n\n        this.uploadDoc(\n          realDocInfo.entityType,\n          realDocInfo._id,\n          file\n        ).subscribe(\n          res => {\n            this.docsInEntity.push(realDocInfo);\n            this.docsUpdatedSub.next([...this.docsInEntity]);\n          }\n        );\n      }\n    );\n  }\n\n\n  uploadDoc(entityType:string, fileId:string, file:File){\n    let fileData = new FormData;\n    fileData.append(\"entityType\", entityType);\n    fileData.append(\"fileId\", fileId)\n    fileData.append(\"file\", file);\n\n    return this.http.post<{message:string}>(\n      this.apiUrl + \"/uploadDoc\", fileData\n    );\n  }\n\n  updateDoc(updatedDoc: Document){\n    //index: index of the document in docsInEntity\n    this.http.put<{message: string}>(\n      this.apiUrl + \"/updateDoc\", updatedDoc\n    ).subscribe(\n      res => {\n        this.docInfoUpdated.next({\n          documentId: updatedDoc._id,\n          documentTitle: updatedDoc.title,\n        })\n      }\n    )\n  }\n\n  deleteDoc(docInfo: Document){\n    let params = new HttpParams()\n    .set(\"_id\", docInfo._id)\n    .set(\"entityType\", docInfo.entityType)\n\n    this.http.delete<{message:string}>\n    (this.apiUrl + \"/deleteDoc\", { params: params })\n    .subscribe(\n      res => {\n        this.docsInEntity = this.docsInEntity.filter(\n          doc => doc._id !== docInfo._id\n        );\n\n        this.docsUpdatedSub.next([...this.docsInEntity]);\n      }\n    );\n  }\n\n\n}\n","module.exports = \"mat-toolbar {\\n  width:100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9vdGVyL2Zvb3Rlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztDQUNaIiwiZmlsZSI6InNyYy9hcHAvZm9vdGVyL2Zvb3Rlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsibWF0LXRvb2xiYXIge1xuICB3aWR0aDoxMDAlO1xufVxuIl19 */\"","module.exports = \"\\n<mat-toolbar color=\\\"primary\\\">\\nVersion: 0.0.1 (Beta)\\n</mat-toolbar>\\n\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.css']\n})\nexport class FooterComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","module.exports = \"ul.nav li a, ul.nav li a:visited {\\n    color: white;\\n}\\n\\nul.nav li a:hover, ul.nav li a:active {\\n  color:white;\\n  background:#3D5CB0;\\n}\\n\\nul.nav li.active a {\\n  background:#3D5CB0;\\n}\\n\\nul.navbar-right li.active a {\\n  background:#3D5CB0;\\n}\\n\\n.example-fill-remaining-space {\\n  /* This fills the remaining space, by using flexbox.\\n     Every toolbar row uses a flexbox row layout. */\\n  flex: 1 1 auto;\\n}\\n\\nmat-toolbar{\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtDQUNoQjs7QUFFRDtFQUNFLFlBQVk7RUFDWixtQkFBbUI7Q0FDcEI7O0FBRUQ7RUFDRSxtQkFBbUI7Q0FDcEI7O0FBRUQ7RUFDRSxtQkFBbUI7Q0FDcEI7O0FBR0Q7RUFDRTtvREFDa0Q7RUFDbEQsZUFBZTtDQUNoQjs7QUFFRDtDQUNDIiwiZmlsZSI6InNyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsidWwubmF2IGxpIGEsIHVsLm5hdiBsaSBhOnZpc2l0ZWQge1xuICAgIGNvbG9yOiB3aGl0ZTtcbn1cblxudWwubmF2IGxpIGE6aG92ZXIsIHVsLm5hdiBsaSBhOmFjdGl2ZSB7XG4gIGNvbG9yOndoaXRlO1xuICBiYWNrZ3JvdW5kOiMzRDVDQjA7XG59XG5cbnVsLm5hdiBsaS5hY3RpdmUgYSB7XG4gIGJhY2tncm91bmQ6IzNENUNCMDtcbn1cblxudWwubmF2YmFyLXJpZ2h0IGxpLmFjdGl2ZSBhIHtcbiAgYmFja2dyb3VuZDojM0Q1Q0IwO1xufVxuXG5cbi5leGFtcGxlLWZpbGwtcmVtYWluaW5nLXNwYWNlIHtcbiAgLyogVGhpcyBmaWxscyB0aGUgcmVtYWluaW5nIHNwYWNlLCBieSB1c2luZyBmbGV4Ym94LlxuICAgICBFdmVyeSB0b29sYmFyIHJvdyB1c2VzIGEgZmxleGJveCByb3cgbGF5b3V0LiAqL1xuICBmbGV4OiAxIDEgYXV0bztcbn1cblxubWF0LXRvb2xiYXJ7XG59XG4iXX0= */\"","module.exports = \"<mat-toolbar color=\\\"primary\\\">\\n\\n  <!--button mat-button color=\\\"white\\\" (click)=\\\"navigateToHome()\\\"\\n  *ngIf=\\\"userIsAuthenticated\\\">\\n    Home\\n  </button-->\\n\\n  <button mat-button color=\\\"white\\\" (click)=\\\"navigateToClasses()\\\"\\n  *ngIf=\\\"userIsAuthenticated\\\">\\n    Classes\\n  </button>\\n\\n  <button mat-button color=\\\"white\\\" (click)=\\\"navigateToGroups()\\\"\\n  *ngIf=\\\"userIsAuthenticated\\\">\\n    Groups\\n  </button>\\n\\n\\n  <button mat-button color=\\\"white\\\" (click)=\\\"navigateToMyLibrary()\\\"\\n  *ngIf=\\\"userIsAuthenticated\\\">\\n    My Library\\n  </button>\\n\\n  <span class=\\\"example-fill-remaining-space\\\">\\n  </span>\\n\\n  <button mat-button color=\\\"white\\\" (click)=\\\"navigateToSF()\\\"\\n  *ngIf=\\\"userIsAuthenticated\\\">\\n    Support\\n  </button>\\n\\n  <button mat-button [matMenuTriggerFor]=\\\"menu\\\"\\n  *ngIf=\\\"userIsAuthenticated\\\">\\n    Manage\\n  </button>\\n  <mat-menu #menu=\\\"matMenu\\\">\\n    <button mat-menu-item (click)=\\\"navigateToProfile()\\\">My Profile</button>\\n    <button mat-menu-item (click)=\\\"logout()\\\">Logout</button>\\n  </mat-menu>\\n\\n\\n  <button mat-button color=\\\"white\\\" (click)=\\\"navigateToLogin()\\\"\\n  *ngIf=\\\"!userIsAuthenticated\\\">\\n    Login\\n  </button>\\n\\n  <button mat-button color=\\\"white\\\" (click)=\\\"navigateToSignUp()\\\"\\n  *ngIf=\\\"!userIsAuthenticated\\\">\\n    Sign-Up\\n  </button>\\n\\n  <!--button mat-button color=\\\"white\\\" (click)=\\\"toTutorial()\\\">\\n    Tutorials\\n  </button-->\\n\\n\\n\\n</mat-toolbar>\\n\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from \"rxjs\";\nimport { Router } from \"@angular/router\";\nimport { AuthService } from \"../auth/auth.service\";\n\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n  public userIsAuthenticated = false;\n  private authListenerSubs: Subscription;\n\n  constructor(private authService: AuthService,\n  private router: Router) { }\n\n  ngOnInit() {\n    this.userIsAuthenticated = this.authService.getIsAuth();\n    this.authListenerSubs = this.authService.authStatus\n      .subscribe(\n        isAuthenticated => {\n        this.userIsAuthenticated = isAuthenticated;\n      });\n  }\n\n\n\n  logout(){\n    this.authService.logout();\n  }\n\n  navigateToSF(){\n    this.router.navigate([\"/support-feedbacks\"])\n  }\n  navigateToHome(){\n    this.router.navigate([\"/home\"]);\n  }\n\n  navigateToClasses(){\n    this.router.navigate([\"/entity/classes\"]);\n  }\n\n  navigateToGroups(){\n    this.router.navigate([\"/entity/groups\"]);\n  }\n\n  navigateToProfile(){\n    this.router.navigate([\"/profile\"]);\n  }\n\n  navigateToLogin(){\n    this.router.navigate([\"/login\"]);\n  }\n\n  navigateToSignUp(){\n    this.router.navigate([\"/signup\"]);\n  }\n\n  navigateToMyLibrary(){\n    this.router.navigate([\"my-library\"])\n  }\n\n\n\n  ngOnDestroy(){\n    this.authListenerSubs.unsubscribe();\n  }\n}\n","import { AbstractControl } from \"@angular/forms\";\nimport { Observable, Observer, of } from \"rxjs\";\n\n// simple mimetype check for MVP\nexport const mimeType = (file: File) => {\n  //const file = control.value as File;\n\n  const admissibleTypes = [\n    \"application/pdf\",\n  //  \"image/png\",\n  //  \"image/jpeg\",\n  ]\n\n  if(admissibleTypes.indexOf(file.type)>-1){\n    return true;\n  }else{\n    return false;\n  }\n}\n\n\n/*\nexport const mimeType = (\n  control: AbstractControl\n): Promise<{ [key: string]: any }> | Observable<{ [key: string]: any }> => {\n  if (typeof(control.value) === 'string') {\n    return of(null);\n  }\n  const file = control.value as File;\n  console.log(\"from line 11 mimetype\", file);\n  const fileReader = new FileReader();\n  const frObs = Observable.create(\n    (observer: Observer<{ [key: string]: any }>) => {\n      fileReader.addEventListener(\"loadend\", () => {\n        const arr = new Uint8Array(fileReader.result).subarray(0, 4);\n        let header = \"\";\n        let isValid = false;\n        for (let i = 0; i < arr.length; i++) {\n          header += arr[i].toString(16);\n        }\n        switch (header) {\n          case \"25504446\":\n            isValid = true;\n            break;\n          default:\n            isValid = false; // Or you can use the blob.type as fallback\n            break;\n        }\n        //console.log(\"The mimetype of the file is \", head)\n        if (isValid) {\n          observer.next(null);\n        } else {\n          console.log(\"file tyle is not in pdf\");\n          observer.next({ invalidMimeType: true });\n        }\n        observer.complete();\n      });\n      fileReader.readAsArrayBuffer(file);\n    }\n  );\n  return frObs;\n};\n\n\n\nexport const mimeType = (\n  control: AbstractControl\n): Observable<{ [key: string]: any }> => {\n  if (typeof(control.value) === 'string') {\n    return of(null);\n  }\n  const file = control.value as File;\n  const fileReader = new FileReader();\n  const frObs = Observable.create(\n    (observer: Observer<{ [key: string]: any }>) => {\n      fileReader.addEventListener(\"loadend\", () => {\n        const arr = new Uint8Array(\n          control.value.result\n        ).subarray(0, 4);\n        let header = \"\";\n        let isValid = false;\n        for (let i = 0; i < arr.length; i++) {\n          header += arr[i].toString(16);\n        }\n        switch (header) {\n          case \"25504446\":\n            isValid = true;\n            break;\n          default:\n            isValid = false; // Or you can use the blob.type as fallback\n            break;\n        }\n        //console.log(\"The mimetype of the file is \", head)\n        if (isValid) {\n          observer.next({validMimeType: true});\n        } else {\n          observer.next({validMimeTyle: false});\n        }\n        observer.complete();\n      });\n      //fileReader.readAsArrayBuffer(file);\n    }\n  );\n  return frObs;\n};\n\n*/\n","module.exports = \".main {\\n  margin-top:5%;\\n  width:800px;\\n  margin:auto;\\n}\\n\\n.sidenav {\\n  float:left;\\n}\\n\\n.content {\\n  margin-left:50%;\\n}\\n\\nmat-expansion-panel{\\n  margin:1%;\\n}\\n\\nmat-form-field,\\ninput {\\n  width: 100%;\\n}\\n\\nmat-spinner {\\n  margin: auto;\\n}\\n\\ninput[type=\\\"file\\\"] {\\n  visibility: hidden;\\n}\\n\\n#open{\\n  margin-left:0%;\\n}\\n\\n#edit{\\n  margin-left:30%;\\n}\\n\\n#delete{\\n  float:right;\\n}\\n\\nmat-card{\\n  margin-top:2%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbXktbGlicmFyeS9teS1saWJyYXJ5LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsWUFBWTtFQUNaLFlBQVk7Q0FDYjs7QUFFRDtFQUNFLFdBQVc7Q0FDWjs7QUFFRDtFQUNFLGdCQUFnQjtDQUNqQjs7QUFFRDtFQUNFLFVBQVU7Q0FDWDs7QUFFRDs7RUFFRSxZQUFZO0NBQ2I7O0FBR0Q7RUFDRSxhQUFhO0NBQ2Q7O0FBRUQ7RUFDRSxtQkFBbUI7Q0FDcEI7O0FBRUQ7RUFDRSxlQUFlO0NBQ2hCOztBQUVEO0VBQ0UsZ0JBQWdCO0NBQ2pCOztBQUVEO0VBQ0UsWUFBWTtDQUNiOztBQUVEO0VBQ0UsY0FBYztDQUNmIiwiZmlsZSI6InNyYy9hcHAvbXktbGlicmFyeS9teS1saWJyYXJ5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XG4gIG1hcmdpbi10b3A6NSU7XG4gIHdpZHRoOjgwMHB4O1xuICBtYXJnaW46YXV0bztcbn1cblxuLnNpZGVuYXYge1xuICBmbG9hdDpsZWZ0O1xufVxuXG4uY29udGVudCB7XG4gIG1hcmdpbi1sZWZ0OjUwJTtcbn1cblxubWF0LWV4cGFuc2lvbi1wYW5lbHtcbiAgbWFyZ2luOjElO1xufVxuXG5tYXQtZm9ybS1maWVsZCxcbmlucHV0IHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cblxubWF0LXNwaW5uZXIge1xuICBtYXJnaW46IGF1dG87XG59XG5cbmlucHV0W3R5cGU9XCJmaWxlXCJdIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4jb3BlbntcbiAgbWFyZ2luLWxlZnQ6MCU7XG59XG5cbiNlZGl0e1xuICBtYXJnaW4tbGVmdDozMCU7XG59XG5cbiNkZWxldGV7XG4gIGZsb2F0OnJpZ2h0O1xufVxuXG5tYXQtY2FyZHtcbiAgbWFyZ2luLXRvcDoyJTtcbn1cbiJdfQ== */\"","module.exports = \"<p>\\n  works\\n</p>\\n\"","\nimport { Component, OnInit, Input } from \"@angular/core\";\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute, ParamMap } from \"@angular/router\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { Document } from \"@app/models/document.model\";\nimport { mimeType } from \"@app/helpers/mime-type.validator\";\nimport { AuthService } from \"@app/auth/auth.service\";\nimport { Subscription } from \"rxjs\";\n\n\n@Component({\n  selector: 'app-my-library',\n  templateUrl: './my-library.component.html',\n  styleUrls: ['./my-library.component.css']\n})\nexport class MyLibraryComponent implements OnInit {\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private authService: AuthService,\n  ) {}\n\n  ngOnInit() {\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'highlightKeywords'\n})\nexport class HighlightKeywordsPipe implements PipeTransform {\n\n  transform(value: string, keywordsStr: string): any {\n    keywordsStr = String.raw`${keywordsStr}`;\n\n    console.log(\"value is\", value);\n\n    if(keywordsStr!=\"\"){\n      const keywords = keywordsStr.split(\" \");\n      //highlightedText = value.split(keyword).join(\"<mark>\"+keyword+\"</mark>\");\n      for (let keyword of keywords){\n        const regex = new RegExp(keyword, 'gi');\n\n        // find all matched str in value ignore cases\n        const found = value.match(regex);\n        if(found!=null){\n          for(let match of found){\n            value = value.split(match).join(\"<mark>\"+match+\"</mark>\");\n          }\n        }\n      }\n\n      return value;\n    }else{\n      return value;\n    }\n  }\n\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'shorten'\n})\nexport class ShortenPipe implements PipeTransform {\n\n  transform(value: any, limit: number) {\n    if(value.length > limit){\n      return value.substr(0, limit) + \"...\";\n    }\n    return value;\n  }\n\n}\n","module.exports = \"#field{\\n  width: 100%\\n}\\n\\n#profile {\\n  margin-left:35%;\\n  margin-top: 5%;\\n  width: 30%;\\n}\\n\\n.alert alert-danger{\\n  height: 20%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJvZmlsZS9wcm9maWxlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFXO0NBQ1o7O0FBRUQ7RUFDRSxnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLFdBQVc7Q0FDWjs7QUFFRDtFQUNFLFlBQVk7Q0FDYiIsImZpbGUiOiJzcmMvYXBwL3Byb2ZpbGUvcHJvZmlsZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2ZpZWxke1xuICB3aWR0aDogMTAwJVxufVxuXG4jcHJvZmlsZSB7XG4gIG1hcmdpbi1sZWZ0OjM1JTtcbiAgbWFyZ2luLXRvcDogNSU7XG4gIHdpZHRoOiAzMCU7XG59XG5cbi5hbGVydCBhbGVydC1kYW5nZXJ7XG4gIGhlaWdodDogMjAlO1xufVxuIl19 */\"","module.exports = \"  <div *ngIf=\\\"successMessage\\\" class=\\\"alert alert-success\\\">\\n    <p style=\\\"margin:auto\\\">{{ successMessage }}</p>\\n    <m\\n  </div>\\n  <div class=\\\"alter alert-danger\\\">\\n    <p style=\\\"margin:auto\\\">{{ errorMessage }}</p>\\n  </div>\\n\\n\\n\\n  <div id=\\\"profile\\\">\\n  <form [formGroup]=\\\"form\\\" (submit)=\\\"onSaveUpdates()\\\" >\\n    <mat-form-field id=\\\"field\\\">\\n      <input matInput type=\\\"text\\\" formControlName=\\\"firstName\\\"\\n      placeholder=\\\"First Name\\\">\\n      <mat-error *ngIf=\\\"form.get('firstName').invalid\\\">\\n        Please enter your first name\\n      </mat-error>\\n    </mat-form-field>\\n    <br>\\n    <mat-form-field id=\\\"field\\\">\\n      <input matInput type=\\\"text\\\" formControlName=\\\"lastName\\\"\\n      placeholder=\\\"Last Name\\\">\\n      <mat-error *ngIf=\\\"form.get('lastName').invalid\\\">\\n        Please enter your last name\\n      </mat-error>\\n    </mat-form-field>\\n    <br>\\n    <mat-form-field id=\\\"field\\\">\\n      <input matInput type=\\\"text\\\" formControlName=\\\"userName\\\"\\n      placeholder=\\\"User Name\\\">\\n      <mat-error *ngIf=\\\"form.get('userName').invalid\\\">\\n        Please enter a user name\\n      </mat-error>\\n    </mat-form-field>\\n    <br>\\n    <mat-form-field id=\\\"field\\\">\\n      <input matInput type=\\\"email\\\" formControlName=\\\"email\\\"\\n      placeholder=\\\"E-mail\\\">\\n      <mat-error *ngIf=\\\"form.get('email').invalid\\\">\\n        Please enter a valid email\\n      </mat-error>\\n    </mat-form-field>\\n    <br>\\n    <mat-form-field id=\\\"field\\\">\\n      <input matInput type=\\\"text\\\" formControlName=\\\"affiliation\\\"\\n      placeholder=\\\"Please enter your institute\\\">\\n      <mat-error *ngIf=\\\"form.get('affiliation').invalid\\\">\\n        Please enter your institute\\n      </mat-error>\\n    </mat-form-field>\\n  </form>\\n\\n  <div>\\n    <button mat-stroked-button color=\\\"primary\\\"\\n    (click)=\\\"onSaveUpdates()\\\">\\n      Save Updates\\n    </button>\\n\\n    <button mat-stroked-button color=\\\"primary\\\"\\n    style=\\\"float:right\\\"\\n    (click)=\\\"onClickChangePassword()\\\">\\n      Change password\\n    </button>\\n  </div>\\n\\n\\n  <form [formGroup]=\\\"passwordUpdateForm\\\"\\n    *ngIf=\\\"showChangePsd\\\" (submit)=\\\"updatePassword()\\\">\\n    <mat-form-field>\\n      <input matInput type=\\\"password\\\" formControlName=\\\"currentPassword\\\"\\n      placeholder=\\\"Current password\\\">\\n    </mat-form-field>\\n    <br>\\n    <mat-form-field>\\n      <input matInput type=\\\"password\\\" formControlName=\\\"newPassword\\\"\\n      placeholder=\\\"New password\\\">\\n    </mat-form-field>\\n    <mat-error *ngIf=\\\"passwordUpdateForm.get('newPassword').invalid\\\">\\n      A valid password must have at least six characters\\n    </mat-error>\\n\\n    <br>\\n    <mat-form-field>\\n      <input matInput type=\\\"password\\\" formControlName=\\\"reNewPassword\\\"\\n      placeholder=\\\"Re-type new password\\\">\\n    </mat-form-field>\\n    <br>\\n\\n\\n    <button mat-stroked-button color=\\\"primary\\\"\\n    (click)=\\\"updatePassword()\\\">\\n      Save new password\\n    </button>\\n\\n  </form>\\n\\n</div>\\n\"","// This component is used to update user infomation\n\nimport { Component, OnInit, EventEmitter, Output } from \"@angular/core\";\nimport { FormGroup, FormControl,\n  Validators } from \"@angular/forms\";\nimport { Router, ActivatedRoute, ParamMap } from \"@angular/router\";\n\nimport { HttpClient } from \"@angular/common/http\";\nimport { AuthService } from \"../auth/auth.service\";\nimport { UserData } from \"../auth/user-data.model\";\nimport { environment } from \"../../environments/environment\";\n\n\n@Component({\n  templateUrl: \"./profile.component.html\",\n  styleUrls: [\"./profile.component.css\"]\n})\nexport class ProfileComponent implements OnInit {\n  public form: FormGroup;\n  private passwordUpdateForm : FormGroup;\n  public showChangePsd:boolean;\n\n\n  public successMessage:string;\n  public errorMessage:string;\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      firstName: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n      lastName: new FormControl(null, { validators: [Validators.required] }),\n      userName: new FormControl(null, { validators: [Validators.required] }),\n      email: new FormControl(null, { validators: [Validators.required] }),\n      affiliation: new FormControl(null, {validators: [Validators.required]}),\n      //researchInterests: new FormControl(null, { validators: [Validators.required] })\n    });\n\n    this.passwordUpdateForm = new FormGroup({\n      currentPassword: new FormControl(null,\n        {validators: [Validators.required]}),\n      newPassword: new FormControl(null,\n        {validators: [Validators.minLength(environment.passwordMinLength)]}),\n      reNewPassword: new FormControl(null),\n    });\n\n    this.authService.fetchUserInfo()\n    .subscribe(\n      response => {\n\n        this.form.setValue({\n          firstName: response.firstName,\n          lastName: response.lastName,\n          userName: response.userName,\n          email: response.email,\n          affiliation: response.affiliation,\n        });\n      },\n      error =>{\n        console.log(error);\n      }\n    );\n  }\n\n  onSaveUpdates(){\n    const updatedInfo = {\n      firstName: this.form.value.firstName,\n      lastName: this.form.value.lastName,\n      userName: this.form.value.userName,\n      email: this.form.value.email,\n      affiliation: this.form.value.affiliation,\n    }\n\n    this.authService.updateOneUser(\n      updatedInfo\n    )\n    .subscribe(\n      response => {\n        this.errorMessage = \"\";\n        this.successMessage =\"Updates Successfully Saved!\";\n        this.authService.setUserName(this.form.value.userName);\n      },\n      error => {\n        this.successMessage=\"\";\n        this.errorMessage = error.error.message;\n        }\n    );\n  }\n\n  onClickChangePassword(){\n    this.showChangePsd = !this.showChangePsd;\n    this.successMessage = \"\";\n    this.errorMessage = \"\";\n  }\n\n  updatePassword(){\n\n    if(this.passwordUpdateForm.get('newPassword').invalid){\n      return;\n    }\n\n\n    const formValue = this.passwordUpdateForm.value;\n\n    if(formValue.newPassword==formValue.reNewPassword){\n      this.authService.updatePassword(formValue.currentPassword, formValue.newPassword)\n      .subscribe(\n        response => {\n          this.errorMessage = \"\";\n          this.successMessage = \"password has been successfully updated\";\n        },\n\n        error => {\n          this.successMessage = \"\";\n          this.errorMessage = \"Current password is incorrect\";\n        }\n      );\n    }else{\n      this.successMessage =\"\";\n      this.errorMessage = \"Re-typed password does not match the new password\";\n    }\n\n    this.passwordUpdateForm.reset();\n  }\n\n\n}\n","module.exports = \".main {\\n  margin-top:5%;\\n}\\n\\n#ticket {\\n  background: #eee;\\n  width:50%;\\n  margin:auto;\\n}\\n\\n#content {\\n  width:100%;\\n}\\n\\n#name {\\n  width:40%;\\n}\\n\\n#email{\\n  width:40%;\\n  margin-left:20%;\\n}\\n\\nmat-card-footer, h4 {\\n  margin:5%;\\n}\\n\\n.example-fill-remaining-space {\\n  /* This fills the remaining space, by using flexbox.\\n     Every toolbar row uses a flexbox row layout. */\\n  flex: 1 1 auto;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc3VwcG9ydC1mZWVkYmFjay9zdXBwb3J0LWZlZWRiYWNrLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0NBQ2Y7O0FBRUQ7RUFDRSxpQkFBaUI7RUFDakIsVUFBVTtFQUNWLFlBQVk7Q0FDYjs7QUFBQztFQUNBLFdBQVc7Q0FDWjs7QUFFRDtFQUNFLFVBQVU7Q0FDWDs7QUFFRDtFQUNFLFVBQVU7RUFDVixnQkFBZ0I7Q0FDakI7O0FBQ0Q7RUFDRSxVQUFVO0NBQ1g7O0FBR0Q7RUFDRTtvREFDa0Q7RUFDbEQsZUFBZTtDQUNoQiIsImZpbGUiOiJzcmMvYXBwL3N1cHBvcnQtZmVlZGJhY2svc3VwcG9ydC1mZWVkYmFjay5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW4ge1xuICBtYXJnaW4tdG9wOjUlO1xufVxuXG4jdGlja2V0IHtcbiAgYmFja2dyb3VuZDogI2VlZTtcbiAgd2lkdGg6NTAlO1xuICBtYXJnaW46YXV0bztcbn0gI2NvbnRlbnQge1xuICB3aWR0aDoxMDAlO1xufVxuXG4jbmFtZSB7XG4gIHdpZHRoOjQwJTtcbn1cblxuI2VtYWlse1xuICB3aWR0aDo0MCU7XG4gIG1hcmdpbi1sZWZ0OjIwJTtcbn1cbm1hdC1jYXJkLWZvb3RlciwgaDQge1xuICBtYXJnaW46NSU7XG59XG5cblxuLmV4YW1wbGUtZmlsbC1yZW1haW5pbmctc3BhY2Uge1xuICAvKiBUaGlzIGZpbGxzIHRoZSByZW1haW5pbmcgc3BhY2UsIGJ5IHVzaW5nIGZsZXhib3guXG4gICAgIEV2ZXJ5IHRvb2xiYXIgcm93IHVzZXMgYSBmbGV4Ym94IHJvdyBsYXlvdXQuICovXG4gIGZsZXg6IDEgMSBhdXRvO1xufVxuIl19 */\"","module.exports = \"<!--mat-toolbar>\\n  <button mat-button color=\\\"primary\\\" (click)=\\\"createNewTicket()\\\">\\n    <mat-icon>add</mat-icon>\\n    <span>New Ticket</span>\\n  </button>\\n</mat-toolbar-->\\n\\n<div class=main>\\n\\n<mat-card id=\\\"ticket\\\">\\n  <h3 class=\\\"text text-info\\\">\\n    How can we help?\\n  </h3>\\n\\n  <mat-card-content>\\n  <form [formGroup]=\\\"ticketForm\\\">\\n      <mat-form-field id=\\\"content\\\">\\n        <textarea matInput rows=\\\"20\\\" formControlName=\\\"content\\\"\\n          placeholder=\\\"Question or feedback\\\">\\n        </textarea>\\n        <mat-error *ngIf=\\\"ticketForm.get('content').invalid\\\">\\n          Ticket cannot be empty\\n        </mat-error>\\n      </mat-form-field>\\n\\n\\n      <mat-form-field id=\\\"name\\\">\\n        <input matInput formControlName=\\\"name\\\"\\n          placeholder=\\\"Your name\\\">\\n        <mat-error *ngIf=\\\"ticketForm.get('name').invalid\\\">\\n          Please fill your name\\n        </mat-error>\\n      </mat-form-field>\\n\\n\\n      <mat-form-field id=\\\"email\\\">\\n        <input matInput formControlName=\\\"userEmail\\\"\\n        placeholder=\\\"Your email\\\">\\n        <mat-error *ngIf=\\\"ticketForm.get('userEmail').invalid\\\">\\n          Please fill your email\\n        </mat-error>\\n      </mat-form-field>\\n\\n    </form>\\n  </mat-card-content>\\n\\n  <br>\\n\\n  <mat-card-actions>\\n    <button mat-button color=\\\"primary\\\"\\n    (click)=\\\"createTicket()\\\">\\n      Submit\\n    </button>\\n\\n    <button mat-button color=\\\"warn\\\"\\n    (click)=\\\"discard()\\\">\\n      Discard\\n    </button>\\n  </mat-card-actions>\\n\\n  <mat-card-footer>\\n    <h4 class=\\\"text text-success\\\">\\n      {{message}}\\n    </h4>\\n  </mat-card-footer>\\n\\n</mat-card>\\n</div>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { SupportFeedbackService } from \"./support-feedback.service\"\nimport { Ticket } from \"@app/models/ticket.model\";\n\n@Component({\n  selector: 'app-support-feedback',\n  templateUrl: './support-feedback.component.html',\n  styleUrls: ['./support-feedback.component.css']\n})\nexport class SupportFeedbackComponent implements OnInit {\n  public tickets : Ticket[] = [];\n  public ticketForm: FormGroup;\n\n  public message: string;\n\n  constructor(\n    private mainService: SupportFeedbackService,\n  ) { }\n\n  ngOnInit() {\n\n    this.ticketForm = new FormGroup({\n      content: new FormControl(null,\n      {\n        validators: [Validators.required]\n      }),\n\n      name: new FormControl (null, {\n        validators: [Validators.required]\n      }),\n\n      userEmail: new FormControl(null,\n      {\n        validators: [Validators.required]\n      }),\n    });\n\n  }\n\n  createTicket(){\n    if(this.ticketForm.invalid){\n      console.log(\"Form invalid\");\n      return;\n    }\n\n\n    const newTicket : Ticket = {\n      _id: null,\n      content: this.ticketForm.value.content,\n      userEmail: this.ticketForm.value.userEmail,\n      fullname: this.ticketForm.value.name,\n    }\n\n    this.mainService.createTicket(newTicket).subscribe(\n      res => {\n        this.message = \"Thank you creating the support ticket, we will get back\" +\n        \" to you soon!\";\n        this.ticketForm.reset();\n      }\n    );\n  }\n\n  discard(){\n    this.ticketForm.reset();\n    this.message = \"\";\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from \"@angular/common/http\";\nimport { Ticket } from \"@app/models/ticket.model\";\nimport { environment } from \"@env/environment\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SupportFeedbackService {\n\n  private apiUrl = environment.apiUrl + \"/tickets/\"\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  createTicket(ticket: Ticket){\n    return this.http.post<{message: string}>(\n      this.apiUrl + \"createTicket\", ticket\n    );\n  }\n\n}\n","module.exports = \".example-container {\\n  width: 100%;\\n  height: 1000px;\\n} mat-drawer {\\n  width: 200px;\\n} h3 {\\n  margin-left: 10%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdHV0b3JpYWxzL3R1dG9yaWFscy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLGVBQWU7Q0FDaEIsQ0FBQztFQUNBLGFBQWE7Q0FDZCxDQUFDO0VBQ0EsaUJBQWlCO0NBQ2xCIiwiZmlsZSI6InNyYy9hcHAvdHV0b3JpYWxzL3R1dG9yaWFscy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmV4YW1wbGUtY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwMHB4O1xufSBtYXQtZHJhd2VyIHtcbiAgd2lkdGg6IDIwMHB4O1xufSBoMyB7XG4gIG1hcmdpbi1sZWZ0OiAxMCU7XG59XG4iXX0= */\"","module.exports = \"\\n<mat-drawer-container class=\\\"example-container\\\">\\n  <mat-drawer mode=\\\"side\\\" opened >\\n    <h3 class=\\\"text text-info\\\">\\n      App list\\n    </h3>\\n\\n    <mat-nav-list>\\n      <a mat-list-item (click)=\\\"showMyLibrary()\\\">\\n        My Library\\n      </a>\\n      <a mat-list-item (click)=\\\"showGroups()\\\">\\n        Groups\\n      </a>\\n      <a mat-list-item (click)=\\\"showClasses()\\\">\\n        Classes\\n      </a>\\n    </mat-nav-list>\\n\\n  </mat-drawer>\\n\\n  <mat-drawer-content>\\n    <div *ngIf=\\\"panel==='myLibrary'\\\">\\n\\n\\n    </div>\\n\\n    <div *ngIf=\\\"panel==='groups'\\\">\\n      <b>Groups</b> is an app that enable users in the same\\n      <b>Group</b> to share annotations amongst each other.\\n\\n      To create a group,\\n      <ul>\\n        <li>\\n          Click on \\\"Groups\\\" in the above toolbar.\\n        </li>\\n        <li>\\n          Then click on \\\"Create a group\\\".\\n        </li>\\n        <li>\\n          After filling out \\\"group name\\\" and \\\"description\\\",\\n          click \\\"Create group\\\"\\n        </li>\\n      </ul>\\n    </div>\\n\\n    <div *ngIf=\\\"panel==='classes'\\\">\\n\\n    </div>\\n  </mat-drawer-content>\\n\\n</mat-drawer-container>\\n\\n\\n\\n\\n\\n\\n<p>\\n  tutorials works!\\n</p>\\n    <mat-tab-group>\\n      <mat-tab label=\\\"Researcher\\\">\\n\\n        Add collegues to your group\\n        Upload a document\\n        Make\\n\\n        <mat-tab-group>\\n          <mat-tab>\\n            Create a group\\n          </mat-tab>\\n\\n          <mat-tab>\\n            Add collegues to your group\\n          </mat-tab>\\n\\n        </mat-tab-group>\\n\\n\\n\\n      </mat-tab>\\n\\n      <mat-tab label=\\\"Instructor\\\">\\n        Create a class\\n\\n        Add all your students to the class\\n\\n        Help students walk through lecture\\n        materials\\n\\n        Students can help each other\\n      </mat-tab>\\n\\n      <mat-tab label=\\\"Student\\\">\\n        Create a study group\\n        Add your friends\\n\\n\\n\\n      </mat-tab>\\n    </mat-tab-group>\\n\"","import { Component, OnInit } from '@angular/core';\n\n\n\n@Component({\n  selector: 'app-tutorials',\n  templateUrl: './tutorials.component.html',\n  styleUrls: ['./tutorials.component.css']\n})\nexport class TutorialsComponent implements OnInit {\n\n  public panel:string;\n\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  showMyLibrary(){\n    this.panel = \"myLibrary\";\n  }\n\n  showGroups(){\n    this.panel = \"groups\";\n  }\n\n  showClasses(){\n    this.panel = \"classes\"\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  apiUrl: \"http://localhost:3000/api\",\n  frontEndUrl: \"http://localhost:4200\",\n  production: false,\n  userIdLength: 30,\n  groupIdLength: 50,\n  threadIdLength: 10,\n  responseIdLength: 10,\n  passwordMinLength:6,\n  strokeStyle: \"#00b8e6\",\n  globalAlpha: 0.2,\n  lineWidth : 20,\n\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}