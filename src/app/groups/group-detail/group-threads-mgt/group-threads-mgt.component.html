<div>
  <mat-form-field>
    <input matInput (keydown.enter)="searchThreads($event)"
    placeholder="Search a thread">
  </mat-form-field>
</div>
<hr>

<div *ngIf="showThreadsList">
    <h4 *ngIf="threads.length==0" class="text-info">
      No threads have been created on this group
    </h4>

    <mat-card style="margin-top:2%"*ngFor="let thread of threads"
    [ngStyle]="{'background-color': thread.viewedBy.indexOf(userId)>-1? 'white':'#C4F5FE'}">
      <mat-card-title>
        <p mathJax="{{thread.title}}"></p>
      </mat-card-title>

      <mat-card-subtitle>
        <p>Created by {{ thread.creatorName }} on {{ thread.litTitle}}</p>
        <p>{{ timestampToDate(thread.createTime)}}</p>

      </mat-card-subtitle>

      <mat-card-content>
        <p mathJax="{{thread.content}}"></p>
      </mat-card-content>

      <mat-card-actions>
        <button mat-stroked-button color="primary"
        (click)="openThread(thread)">
          View
        </button>

        <button style="margin-left:5%" mat-stroked-button color="primary"
        *ngIf="thread.viewedBy.indexOf(userId)>-1"
        (click)="markAsUnread(thread)">
          Mark as unread
        </button>
      </mat-card-actions>
    </mat-card>
</div>

<div *ngIf="showThreadsSearch">
  <h4 *ngIf="matchedThreads.length==0" class="text-info">
    No threads matched your search
  </h4>

  <mat-card
  style="margin-top:2%" *ngFor="let thread of matchedThreads"
  [ngStyle]="{'background-color': thread.viewedBy.indexOf(userId)>-1? 'white':'#C4F5FE'}">
    <mat-card-title>
      <p mathJax="{{thread.title | highlightKeywords:keywordsStr }}"></p>
    </mat-card-title>

    <mat-card-subtitle>
      <p>Created by
        <span [innerHTML]="thread.creatorName | highlightKeywords:keywordsStr">
        </span> on
        <span [innerHTML]="thread.litTitle | highlightKeywords:keywordsStr">
        </span>
      </p>
      <p>{{timestampToDate(thread.createTime)}}</p>

    </mat-card-subtitle>

    <mat-card-content>
      <p mathJax="{{thread.content |  highlightKeywords:keywordsStr }}"></p>
    </mat-card-content>

    <mat-card-actions>
      <button mat-stroked-button color="primary"
      (click)="openThread(thread)">
        View
      </button>

      <button style="margin-left:5%" mat-stroked-button color="primary"
      *ngIf="thread.viewedBy.indexOf(userId)>-1"
      (click)="markAsUnread(thread)">
        Mark as unread
      </button>
    </mat-card-actions>
  </mat-card>
</div>
