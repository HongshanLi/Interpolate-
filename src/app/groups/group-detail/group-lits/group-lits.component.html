<div class="main">
  <div class="sidenav">
    <button mat-button matTooltip="add documents from My Library"
    [matMenuTriggerFor]="myDocs" (click)="showDocsInMyLib()"
    color="primary">
      Add documents
    </button>


    <mat-menu #myDocs="matMenu">
      <button mat-menu-item *ngFor="let lit of docsInMyLib"
      (click)="addLitFromMyLibrary(lit)">
        {{ lit.title }}
      </button>
    </mat-menu>

  </div>

  <div class="content">
    <mat-form-field>
      <input matInput (keydown.enter)="search($event)" placeholder="Search a file">
    </mat-form-field>
  </div>
</div>

    <!-- end of form for uploading paper -->

<div *ngIf="showAllFiles">
<div *ngFor="let lit of lits">
<mat-card>
<h4> {{ lit.title }}</h4>
<p> {{ lit.authors }}</p>
<h5 class="text text-info">Uploaded by {{ lit.userName }} at
  {{ timestampToDate(lit.uploadTime) }}
</h5>
<hr>
<mat-card-actions>
  <button mat-button color="primary"
  (click)="openLit(lit)">
    OPEN
  </button>

  <button mat-button color="primary"
  (click)="onUpdate(lit)">
    EDIT
  </button>

  <button mat-button color="warn"
  *ngIf="lit.threadsCount===0"
  (click)="onDelete(lit)">
    DELETE
  </button>
</mat-card-actions>
</mat-card>

<br>
</div>
</div>

<div *ngIf="showMatchedFiles">
<h4 *ngIf="matchedFiles.length==0" class="text text-info">
No files matched your search
</h4>
<div *ngFor="let lit of matchedFiles">
<mat-card>
<h4 innerHTML="{{ lit.title | highlightKeywords: keywords }}"></h4>
<p innerHTML="{{ lit.authors| highlightKeywords: keywords }}">
</p>
<h5 class="text text-info"
innerHTML="Uploaded by {{lit.userName | highlightKeywords: keywords}}">
</h5>
<hr>
<mat-card-actions>
  <button mat-button color="primary"
  (click)="openLit(lit)">
    OPEN
  </button>

  <button mat-button color="primary"
  (click)="onUpdate(lit)">
    EDIT
  </button>

  <button mat-button color="warn"
  *ngIf="lit.threadsCount===0"
  (click)="onDelete(lit)">
    DELETE
  </button>
</mat-card-actions>
</mat-card>
<br>

</div>
</div>


<!--update form -->
<mat-card *ngIf="showUpdateForm">
<form [formGroup]="updateForm" (submit)="onSaveUpdates()" >
<mat-form-field id="field">
<input matInput type="text" formControlName="title"
placeholder="Title of the literature">
<mat-error *ngIf="updateForm.get('title').invalid">
Please enter the title of the paper/note you want to upload.
</mat-error>
</mat-form-field>
<mat-form-field id="field">
<input matInput type="text" formControlName="authors"
placeholder="Authors of the literature separated by comma">
<mat-error *ngIf="updateForm.get('authors').invalid">
  Please enter the name(s) of the author(s)
</mat-error>
</mat-form-field>

<mat-card-actions>
<button mat-button color="primary"
type="submit">
  Save Updates
</button>

<button mat-button color="warn" (click)="discardUpdateForm()">
  Discard
</button>
</mat-card-actions>

</form>
</mat-card>
